webpackJsonp([25],{1357:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){return{createcontact:e.createcontact.contactData,contactsList:e.createcontact.associatedContacts}}function s(e){return{actions:(0,h.bindActionCreators)(k,e)}}Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(0),u=n(i),f=a(3),p=a(7),E=a(12),b=(n(E),a(6)),h=a(5),v=a(1),y=n(v),N=a(4),g=(l(N),a(41)),C=n(g),w=a(197),k=l(w);a(10);var _=a(195),I=l(_),D=a(26),x=l(D),A=a(8),L=n(A),O=u.default.createElement(f.Link,{to:"/company"},"Companies"),P=u.default.createElement("i",{className:"fa fa-star"}),B=u.default.createElement("li",{className:"active"},u.default.createElement("a",{href:"#contact-add","data-toggle":"tab"},"Company")),S=u.default.createElement("li",null,u.default.createElement("a",{href:"#contact-moreinfo","data-toggle":"tab"},"More Info")),j=u.default.createElement(f.Link,{to:"/company",className:"btn btn-sm btn-circle red"},"Cancel"),M=u.default.createElement("label",{htmlFor:"company"},"Company"),T=u.default.createElement("label",{htmlFor:"parent"},"Parent Company"),F=u.default.createElement("label",{htmlFor:"status"},"Status"),H=u.default.createElement("label",{htmlFor:"webAddress"},"Web Address"),J=u.default.createElement("div",{className:"portlet-title"},u.default.createElement("div",{className:"caption"},u.default.createElement("i",{className:"fa fa-phone"}),"Phone")),W=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null),u.default.createElement("th",null,"Type"),u.default.createElement("th",null,"Number"))),z=u.default.createElement("div",{className:"portlet-title"},u.default.createElement("div",{className:"caption"},u.default.createElement("i",{className:"fa fa-envelope"}),"Email")),R=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null),u.default.createElement("th",null,"Type"),u.default.createElement("th",null,"Address"))),U=u.default.createElement("div",{className:"portlet-title"},u.default.createElement("div",{className:"caption"},u.default.createElement("i",{className:"fa fa-building"}),"Address")),q=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null),u.default.createElement("th",null,"Type"),u.default.createElement("th",null,"Addr. 1"),u.default.createElement("th",null,"Addr. 2"),u.default.createElement("th",null,"City"),u.default.createElement("th",null,"State"),u.default.createElement("th",null,"Zip"),u.default.createElement("th",null,"Country"))),Z=u.default.createElement("div",{className:"portlet-title"},u.default.createElement("div",{className:"caption"},u.default.createElement("i",{className:"fa fa-address-book"}),"Contacts")),G=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"Name"),u.default.createElement("th",null,"Title"),u.default.createElement("th",null,"Phone"),u.default.createElement("th",null,"Email"))),K=u.default.createElement("div",{className:"portlet-title tabbable-line"},u.default.createElement("div",{className:"caption"},u.default.createElement("i",{className:"icon-users font-dark"}),u.default.createElement("span",{className:"caption-subject font-dark bold uppercase"},"Other Details"))),Q=u.default.createElement("label",{htmlFor:"form_control_1"},"Created By"),V=u.default.createElement("label",{htmlFor:"form_control_1"},"On"),X=u.default.createElement("label",{htmlFor:"form_control_1"},"Modified By"),Y=u.default.createElement("label",{htmlFor:"form_control_1"},"On"),ee=function(e){function t(e,a){r(this,t);var l=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return(0,L.default)(l),l.state={contactDetails:{},phoneDetails:[],mailDetails:[],addressdetails:[],contactData:"",associatedContacts:[],breadcrumb:!0},l}return o(t,e),m(t,[{key:"componentWillMount",value:function(){var e={contactId:this.props.params.companyId},t={companyId:localStorage.companyId,companyContactId:this.props.params.companyId,userType:2};this.props.actions.getContact(e),this.props.actions.getAssociatedContacts(t)}},{key:"componentDidMount",value:function(){x.showLoader("companyList")}},{key:"componentWillReceiveProps",value:function(e){var t=[],a=[],l=[];if(e.createcontact){var n=JSON.parse(JSON.stringify(e.createcontact));if(n.phoneInfo){n.phoneInfo.map(function(e,a){t.push(e)}.bind(this))}if(n.internetInfo){n.internetInfo.map(function(e,t){a.push(e)}.bind(this))}if(n.addressInfo){n.addressInfo.map(function(e,t){l.push(e)}.bind(this))}var r=(0,p.findDOMNode)(this.refs.companyList);if($(r).unblock(),this.state.breadcrumb&&n.companyName){var c={parent:O,childone:n.companyName,childtwo:""};this.props.breadCrumb(c),this.state.breadcrumb=!1}}this.setState({contactData:n,phoneDetails:t,mailDetails:a,addressdetails:l,associatedContacts:e.contactsList})}},{key:"handleContactDetails",value:function(e){var t=this.state.associatedContacts[e];window.open("/contact/"+t._id,"_blank")}},{key:"handleCompanyDetails",value:function(e){e&&window.open("/company/"+e,"_blank")}},{key:"handleDelete",value:function(){$("#company_delete").modal("show")}},{key:"deleteEstimateHandler",value:function(){this.props.params.companyId&&($("#company_delete").modal("hide"),x.showLoader("companyList"),this.props.actions.deleteContact(this.props.params.companyId,1))}},{key:"render",value:function(){var e=this.state.contactData;if(e)var t=0!=e.statusInfo.length?e.statusInfo[0].statusName:"",l=P,n="",r=this.state.phoneDetails.map(function(e,t){var a=I.removeSpecialCharSpace(e.phone);if(a.length<=11&&a.includes("x"))n=e.phone.substring(0,e.phone.indexOf("x"));else{n=e.phone;var r=n,c=r.replace(/_/g,"");n=c}return u.default.createElement("tr",{key:t},u.default.createElement("td",null,e.isPrimary?l:""),u.default.createElement("td",null,e.phonetype),u.default.createElement("td",null,n||""))}.bind(this)),c=this.state.mailDetails.map(function(e,t){return u.default.createElement("tr",{key:t},u.default.createElement("td",null,e.isPrimary?l:""),u.default.createElement("td",null,e.internetType),u.default.createElement("td",null,e.internetvalue))}.bind(this)),o=this.state.addressdetails.map(function(e,t){var a=e.zip+" "+e.city+" "+e.state+" "+e.mapAddress1+" "+e.mapAddress2,n="";return 1==e.countryId?n="US":2==e.countryId&&(n="India"),u.default.createElement("tr",{key:t},u.default.createElement("td",null,e.isPrimary?l:""),u.default.createElement("td",null,e.addressType),u.default.createElement("td",null,u.default.createElement("a",{href:"http://maps.google.com/?q="+a,target:"_blank"},e.mapAddress1)),u.default.createElement("td",null,e.mapAddress2),u.default.createElement("td",null,e.city),u.default.createElement("td",null,e.state),u.default.createElement("td",null,e.zip),u.default.createElement("td",null,n))}.bind(this)),d=this.state.associatedContacts.map(function(e,t){var a=e.phoneInfo.map(function(e,t){if(e.isPrimary)return e.phone}),l=e.internetInfo.map(function(e,t){if(e.isPrimary)return e.internetvalue});return u.default.createElement("tr",{key:t},u.default.createElement("td",null,u.default.createElement("a",{onClick:this.handleContactDetails.bind(this,t)},e.firstname+" "+e.lastname)),u.default.createElement("td",null,e.title?e.title:"-"),u.default.createElement("td",null,0!=e.phoneInfo.length?a:"-"),u.default.createElement("td",null,0!=e.internetInfo.length?l:"-"))}.bind(this));return u.default.createElement("div",null,u.default.createElement("div",{className:"portlet-title tabbable-line"},u.default.createElement("ul",{className:"nav nav-tabs"},B,S,u.default.createElement("div",{className:"text-right"},j," ",u.default.createElement("button",{className:"btn btn-sm btn-circle red",onClick:this.handleDelete},"Delete ")," ",u.default.createElement(f.Link,{to:"/company/"+this.props.params.companyId+"/edit",className:"btn btn-sm btn-circle green"},"Edit")," "))),u.default.createElement("div",{className:"portlet light bordered",id:"companyList",ref:"companyList"},u.default.createElement("div",{className:"portlet-body"},u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane active",id:"contact-add"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-2 col-md-2 col-sm-2 col-xs-4"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"fileinput fileinput-exists","data-provides":"fileinput"},u.default.createElement("div",{className:"fileinput-preview thumbnail","data-trigger":"fileinput",style:{height:"142px"}},u.default.createElement("img",{src:e.profileImage?e.profileImage:a(1420),className:"img-responsive",alt:"Logo"}))))),u.default.createElement("div",{className:"col-lg-10 col-md-10 col-sm-8 col-xs-12"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-3 col-md-5 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.companyName?e.companyName:"-"),M)),u.default.createElement("div",{className:"col-lg-3 col-md-5 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static",onClick:this.handleCompanyDetails.bind(this,e.parentContactId)},u.default.createElement("a",null,e.parentContactName?e.parentContactName:"-")),T)),u.default.createElement("div",{className:"col-lg-2 col-md-2 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},t),F)),u.default.createElement("div",{className:"col-lg-4 col-md-4 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.webAddress?u.default.createElement(f.Link,{to:e.webAddress?"//"+e.webAddress:"#",target:"_blank",onClick:function(t){t.preventDefault(),window.open(e.webAddress?"//"+e.webAddress:"#")}},e.webAddress):"-"),H))))),u.default.createElement("div",{className:"row"},0!==this.state.phoneDetails.length?u.default.createElement("div",{className:"col-lg-6 col-md-12"},u.default.createElement("div",{className:"portlet blue-hoki box"},J,u.default.createElement("div",{className:"portlet-body",style:{padding:0}},u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table table-hover table-bordered table-striped",style:{marginBottom:0}},W,u.default.createElement("tbody",null,r)))))):null,0!==this.state.mailDetails.length?u.default.createElement("div",{className:"col-lg-6 col-md-12"},u.default.createElement("div",{className:"portlet green-meadow box"},z,u.default.createElement("div",{className:"portlet-body",style:{padding:0}},u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table table-hover table-bordered table-striped",style:{marginBottom:0}},R,u.default.createElement("tbody",null,c)))))):null,0!==this.state.addressdetails.length?u.default.createElement("div",{className:"col-lg-12 col-md-12"},u.default.createElement("div",{className:"portlet red-sunglo box"},U,u.default.createElement("div",{className:"portlet-body",style:{padding:0}},u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table table-hover table-bordered table-striped",style:{marginBottom:0}},q,u.default.createElement("tbody",null,o)))))):null,0!==this.state.associatedContacts.length?u.default.createElement("div",{className:"col-lg-12 col-md-12"},u.default.createElement("div",{className:"portlet grey-cascade box"},Z,u.default.createElement("div",{className:"portlet-body",style:{padding:0}},u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table table-hover table-bordered table-striped",style:{marginBottom:0}},G,u.default.createElement("tbody",null,d)))))):null)),u.default.createElement("div",{className:"tab-pane",id:"contact-moreinfo"},K,u.default.createElement("div",{className:"portlet-body"},u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane active",id:"user-details"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.createdBy?e.createdBy:"-"),Q)),u.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.createdAt?(0,y.default)(e.createdAt).format("LLL"):"-"),V)),u.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.modifiedBy?e.modifiedBy:"-"),X)),u.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},e.modifiedBy?(0,y.default)(e.updatedAt).format("LLL"):"-"),Y)))))))))),u.default.createElement(C.default,{deleteModalId:"company_delete",deleteUserHandler:this.deleteEstimateHandler}))}}]),t}(u.default.Component);t.default=(0,b.connect)(d,s)(ee)},1420:function(e,t,a){e.exports=a.p+"itemlogo.png"}});