webpackJsonp([61],{1353:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return{userDetails:e.accountReducer.companyUserDetail,deleteUser:e.accountReducer.deleteUser,updateUserStatus:e.accountReducer.updateUserStatus,activityByUser:e.accountReducer.activityByUser}}function o(e){return{actions:(0,E.bindActionCreators)(g,e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),m=a(0),u=s(m),f=a(3),p=a(25),v=(l(p),a(16)),b=(l(v),a(6)),E=a(5),y=a(26),N=l(y),h=a(301),g=l(h),I=a(9),D=s(I),U=(a(302),a(1)),w=s(U),k=u.default.createElement(f.Link,{to:"/account"},"Users"),S=u.default.createElement("i",{className:"fa fa-ban"}),H=u.default.createElement("a",{className:"btn red","data-toggle":"modal",href:"#reset-user-password"},u.default.createElement("i",{className:"fa fa-key"}),"Password Reset"),_=u.default.createElement("a",{className:"btn blue","data-toggle":"modal",href:"#reinvite-user"},u.default.createElement("i",{className:"fa fa-paper-plane-o"}),"Resend Invite"),A=u.default.createElement("div",{className:"cont-col1"},u.default.createElement("div",{className:"label label-sm label-info"},u.default.createElement("i",{className:"fa fa-check"}))),C=u.default.createElement("div",{className:"cont-col1"},u.default.createElement("div",{className:"label label-sm label-warning"},u.default.createElement("i",{className:"fa fa-bell-o"}))),L=u.default.createElement("div",{className:"cont-col1"},u.default.createElement("div",{className:"label label-sm label-default"},u.default.createElement("i",{className:"fa fa-user"}))),O=u.default.createElement("div",{className:"cont-col1"},u.default.createElement("div",{className:"label label-sm label-success"},u.default.createElement("i",{className:"fa fa-user"}))),P=u.default.createElement("i",{className:"icon-users font-dark"}),R=u.default.createElement("li",{className:"active"},u.default.createElement("a",{href:"#user-details","data-toggle":"tab"}," Details ")),F=u.default.createElement("a",{className:"btn purple","data-toggle":"modal",href:"#delete-user"},u.default.createElement("i",{className:"fa fa-remove"}),"Delete User"),j=u.default.createElement("i",{className:"fa fa-remove"}),x=u.default.createElement("i",{className:"fa fa-pencil"}),B=u.default.createElement("label",{htmlFor:"first_name"},"First Name"),M=u.default.createElement("label",{htmlFor:"status"},"Status"),Y=u.default.createElement("label",{htmlFor:"last_name"},"Last Name"),T=u.default.createElement("label",{htmlFor:"role"},"Roles"),W=u.default.createElement("label",{htmlFor:"email"},"Email"),z=u.default.createElement("label",{htmlFor:"last_login"},"Last Login"),J=u.default.createElement("label",{htmlFor:"phone"},"Phone"),q=u.default.createElement("label",{htmlFor:"location"},"Location"),G=u.default.createElement("label",{htmlFor:"about"},"About"),K=u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"Activity"))),Q=u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"}),u.default.createElement("h4",{className:"modal-title"},"Delete User")),V=u.default.createElement("div",{className:"modal-body"},"Are you sure you want to delete this user ?"),X=u.default.createElement("button",{type:"button","data-dismiss":"modal",className:"btn dark btn-outline"},"No"),Z=u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"}),u.default.createElement("h4",{className:"modal-title"},"Reset User Password")),ee=u.default.createElement("div",{className:"modal-body"},"Are you sure you want to reset this user password ?"),te=u.default.createElement("button",{type:"button","data-dismiss":"modal",className:"btn dark btn-outline"},"No"),ae=u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"}),u.default.createElement("h4",{className:"modal-title"},"Update User Status")),le=u.default.createElement("div",{className:"modal-body"},"Are you sure you want to update this user status ?"),se=u.default.createElement("button",{type:"button","data-dismiss":"modal",className:"btn dark btn-outline"},"No"),re=u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"}),u.default.createElement("h4",{className:"modal-title"},"Reinvite User")),ne=u.default.createElement("div",{className:"modal-body"},"Are you sure you want to reinvite this user ?"),de=u.default.createElement("button",{type:"button","data-dismiss":"modal",className:"btn dark btn-outline"},"No"),ce=function(e){function t(e,a){r(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return l.state={userData:[],isAccepted:"",isEnabled:"",activityData:[],rolesOptions:[],roles:[],breadcrumb:!0},l.editUserHandler=l.editUserHandler.bind(l),l.CancelHandler=l.CancelHandler.bind(l),l.deleteUserHandler=l.deleteUserHandler.bind(l),l.updateUserStatusHandler=l.updateUserStatusHandler.bind(l),l.resendInvitationHandler=l.resendInvitationHandler.bind(l),l.resetUserPasswordHandler=l.resetUserPasswordHandler.bind(l),l.getActivityList=l.getActivityList.bind(l),l}return d(t,e),i(t,[{key:"componentWillMount",value:function(){var e={userId:this.props.params.userId,companyId:localStorage.companyId};this.props.actions.loadUserData(e)}},{key:"componentDidMount",value:function(){N.showLoader("details")}},{key:"componentWillReceiveProps",value:function(e){if(e.userDetails&&($("#details").unblock(),this.setState({userData:e.userDetails,rolesOptions:e.userDetails.roles,isAccepted:e.userDetails.isAccepted,isEnabled:e.userDetails.status}),this.state.breadcrumb&&e.userDetails.firstname)){var t={parent:k,childone:e.userDetails.firstname+" "+e.userDetails.lastname,childtwo:""};this.props.breadCrumb(t),this.state.breadcrumb=!1}e.updateUserStatus&&this.setState({isEnabled:e.updateUserStatus.status}),e.deleteUser&&f.browserHistory.push("/account"),e.activityByUser&&($("#user-activity").unblock(),this.setState({activityData:e.activityByUser}))}},{key:"editUserHandler",value:function(e){e.preventDefault(),(0,D.default)("div.portlet").block(),f.browserHistory.push("/account/user/"+this.props.params.userId+"/edit")}},{key:"CancelHandler",value:function(e){e.preventDefault(),f.browserHistory.push("/account")}},{key:"deleteUserHandler",value:function(e){e.preventDefault();var t={companyId:localStorage.companyId,userId:this.props.params.userId},a={userId:this.props.params.userId,companyId:localStorage.companyId,fullname:this.state.userData.firstname+" "+this.state.userData.lastname,activity:"was deleted by "+localStorage.companyName,activity_type:"errornotify"};this.props.actions.deleteUser(t,a),$("#delete-user").modal("hide")}},{key:"updateUserStatusHandler",value:function(e){e.preventDefault();var t,a=this.state.isEnabled;1==a?t="0":0==a&&(t="1");var l={userId:this.props.params.userId,status:t,companyId:localStorage.companyId},s=status?"disable":"enable",r={userId:this.props.params.userId,companyId:localStorage.companyId,fullname:this.state.userData.firstname+" "+this.state.userData.lastname,activity:"status was "+s+"d by "+localStorage.companyName,activity_type:s};this.props.actions.changeUserStatus(l,r),$("#disable-user").modal("hide")}},{key:"resendInvitationHandler",value:function(e){e.preventDefault();var t={userId:this.props.params.userId,companyId:localStorage.companyId},a={userId:this.props.params.userId,companyId:localStorage.companyId,fullname:this.state.userData.firstname+" "+this.state.userData.lastname,activity:"was re-sent invitation by "+localStorage.companyName,activity_type:"notify"};this.props.actions.reinviteUser(t,a),$("#reinvite-user").modal("hide")}},{key:"resetUserPasswordHandler",value:function(e){e.preventDefault();var t={companyId:localStorage.companyId,userId:this.props.params.userId},a={userId:this.props.params.userId,companyId:localStorage.companyId,fullname:this.state.userData.firstname+" "+this.state.userData.lastname,activity:"password has been reset by "+localStorage.companyName,activity_type:"notify"};this.props.actions.resetUserPassword(t,a),$("#reset-user-password").modal("hide")}},{key:"getActivityList",value:function(){var e={userId:this.props.params.userId,companyId:localStorage.companyId};this.props.actions.getActivityByUser(e),N.showLoader("user-activity")}},{key:"render",value:function(){var e;e=this.state.isEnabled?"Enabled":"Disabled";var t=u.default.createElement("a",{className:"btn green","data-toggle":"modal",href:"#disable-user"},S,this.state.isEnabled?"Disable User":"Enable User"),a=H,l=_,s=this.state.activityData.map(function(e,t){if("success"==e.activity_type)var a=u.default.createElement("div",{className:"col1"},u.default.createElement("div",{className:"cont"},A,u.default.createElement("div",{className:"cont-col2"},u.default.createElement("div",{className:"desc"},u.default.createElement("span",null,e.fullname)," ",e.activity))));else if("notify"==e.activity_type)var a=u.default.createElement("div",{className:"col1"},u.default.createElement("div",{className:"cont"},C,u.default.createElement("div",{className:"cont-col2"},u.default.createElement("div",{className:"desc"},u.default.createElement("span",null,e.fullname)," ",e.activity))));else if("disable"==e.activity_type)var a=u.default.createElement("div",{className:"col1"},u.default.createElement("div",{className:"cont"},L,u.default.createElement("div",{className:"cont-col2"},u.default.createElement("div",{className:"desc"},u.default.createElement("span",null,e.fullname)," ",e.activity))));else if("enable"==e.activity_type)var a=u.default.createElement("div",{className:"col1"},u.default.createElement("div",{className:"cont"},O,u.default.createElement("div",{className:"cont-col2"},u.default.createElement("div",{className:"desc"},u.default.createElement("span",null,e.fullname)," ",e.activity))));var l=(0,w.default)(e.updatedAt).fromNow();return u.default.createElement("tr",{key:t,className:"feeds"},u.default.createElement("td",null,u.default.createElement("li",null,a,u.default.createElement("div",{className:"col2"},u.default.createElement("div",{className:"date"}," ",l," ")))))}.bind(this));return u.default.createElement("div",{className:"portlet light bordered",id:"details"},u.default.createElement("div",{className:"portlet-title tabbable-line"},u.default.createElement("div",{className:"caption"},P,u.default.createElement("span",{className:"caption-subject font-dark bold uppercase"},"User - ",this.state.userData.firstname," ",this.state.userData.lastname)),u.default.createElement("ul",{className:"nav nav-tabs"},R,u.default.createElement("li",null,u.default.createElement("a",{id:"get-user-activity",href:"#user-activity","data-toggle":"tab",onClick:this.getActivityList}," Activity ")))),u.default.createElement("div",{className:"portlet-body"},u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane active",id:"user-details"},u.default.createElement("form",{action:"#",className:"horizontal-form"},u.default.createElement("div",{className:"form-body"},u.default.createElement("div",{className:"row clearfix margin-bottom-30"},u.default.createElement("div",{className:"col-md-8"},u.default.createElement("div",{className:"btn-group btn-group-circle"},this.state.isAccepted?a:"",this.state.isAccepted?t:"",F,this.state.isAccepted?"":l)),u.default.createElement("div",{className:"col-md-4 text-right"},u.default.createElement("button",{className:"btn btn-sm btn-circle red",onClick:this.CancelHandler},j," Cancel"),u.default.createElement("button",{className:"btn btn-sm btn-circle green",onClick:this.editUserHandler},x," Edit"))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",this.state.userData.firstname),B)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",this.state.isEnabled?e:"Invited"," "),M)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",this.state.userData.lastname," "),Y)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},this.state.rolesOptions?this.state.rolesOptions.map(function(e){return u.default.createElement("span",null,e.roleName,"   ")}):"-"),T)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",u.default.createElement("a",{href:"mailto:{this.state.userData.email}"},this.state.userData.email)," "),W)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},this.state.userData.lastLogin?(0,w.default)(this.state.userData.lastLogin).format("LLL"):"-"),z)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",this.state.userData.phone?this.state.userData.phone:"-"),J)),u.default.createElement("div",{className:"col-md-6"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"}," ",this.state.userData.location?this.state.userData.location:"-"),q)),u.default.createElement("div",{className:"col-md-12"},u.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},u.default.createElement("div",{className:"form-control form-control-static"},this.state.userData.about?this.state.userData.about:"-"),G)))))),u.default.createElement("div",{className:"tab-pane",id:"user-activity"},u.default.createElement("div",{className:"table-container"},u.default.createElement("table",{className:"table table-striped table-bordered table-hover",id:"activity_3"},K,u.default.createElement("tbody",null,s)))))),u.default.createElement("div",{id:"delete-user",className:"modal fade",tabIndex:"-1","aria-hidden":"true"},u.default.createElement("div",{className:"modal-dialog"},u.default.createElement("div",{className:"modal-content"},Q,V,u.default.createElement("div",{className:"modal-footer"},X,u.default.createElement("button",{type:"button",className:"btn green",onClick:this.deleteUserHandler},"Yes"))))),u.default.createElement("div",{id:"reset-user-password",className:"modal fade",tabIndex:"-1","aria-hidden":"true"},u.default.createElement("div",{className:"modal-dialog"},u.default.createElement("div",{className:"modal-content"},Z,ee,u.default.createElement("div",{className:"modal-footer"},te,u.default.createElement("button",{type:"button",className:"btn green",onClick:this.resetUserPasswordHandler},"Yes"))))),u.default.createElement("div",{id:"disable-user",className:"modal fade",tabIndex:"-1","aria-hidden":"true"},u.default.createElement("div",{className:"modal-dialog"},u.default.createElement("div",{className:"modal-content"},ae,le,u.default.createElement("div",{className:"modal-footer"},se,u.default.createElement("button",{type:"button",className:"btn green",onClick:this.updateUserStatusHandler},"Yes"))))),u.default.createElement("div",{id:"reinvite-user",className:"modal fade",tabIndex:"-1","aria-hidden":"true"},u.default.createElement("div",{className:"modal-dialog"},u.default.createElement("div",{className:"modal-content"},re,ne,u.default.createElement("div",{className:"modal-footer"},de,u.default.createElement("button",{type:"button",className:"btn green",onClick:this.resendInvitationHandler},"Yes"))))))}}]),t}(u.default.Component);t.default=(0,b.connect)(c,o)(ce)}});