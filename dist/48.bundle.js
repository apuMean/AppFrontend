webpackJsonp([48],{1385:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){var a;return a={estimateNo:e.estimate.estimateNo,estimateCreate:e.estimate.estimateCreate,companyList:e.estimate.companyList,projectList:e.estimate.projectList,proposalList:e.estimate.proposalList,companyPhoneInternet:e.estimate.companyPhoneInternet,salesRepList:e.estimate.salesRepList,individualList:e.estimate.individualList},s(a,"salesRepList",e.estimate.salesRepList),s(a,"opportunityList",e.estimate.opportunityList),s(a,"itemList",e.estimate.itemList),s(a,"createcontact",e.createcontact.contactData),s(a,"opportunityDetail",e.opportunity.oppDetailData),s(a,"itemDetail",e.itemCreation.itemDetailData),s(a,"contactDetails",e.estimate.contactDetails),s(a,"laborRates",e.estimate.laborRates),s(a,"newIndividualCreated",e.estimate.individualCreated),s(a,"newSalesCreated",e.estimate.salesCreated),s(a,"newCreatedItem",e.estimate.newCreatedItem),s(a,"companyCreated",e.estimate.companyCreated),s(a,"ManufacturerList",e.estimate.manufacturerList),s(a,"estimateStages",e.estimate.estimateStages),s(a,"proposalDetail",e.estimate.proposalDetail),s(a,"createProposalData",e.proposal.createPrposalData),a}function o(e){return{actions:(0,N.bindActionCreators)(H,e),contactactions:(0,N.bindActionCreators)(L,e),oppActions:(0,N.bindActionCreators)(q,e),itemaction:(0,N.bindActionCreators)(z,e),settingsActions:(0,N.bindActionCreators)(j,e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),c=a(0),f=i(c),p=a(3),h=a(7),E=i(h),b=a(6),N=a(5),y=a(12),v=i(y),g=a(8),x=i(g),T=a(148),C=i(T),I=a(198),S=i(I),D=a(202),A=i(D),O=a(300),k=i(O),M=a(586),R=a(76),P=i(R),w=a(4),_=(l(w),a(16)),V=(l(_),a(197)),L=l(V),F=a(102),H=l(F),W=a(69),q=l(W),U=a(587),j=l(U),B=a(196),z=l(B),Z=a(124),Y=(l(Z),a(195)),Q=l(Y),G=a(4),J=l(G),K=a(22),X=l(K),ee=l(K),te=a(582),ae=i(te),le=a(41),ie=i(le),se=a(9),ne=i(se);a(10);var de=a(1),re=i(de),me=a(588),oe=i(me),ue=a(589),ce=i(ue),fe=a(26),pe=l(fe),he=a(591),Ee=i(he),be=a(592),Ne=i(be),ye=a(199),ve=i(ye),ge=a(590),xe=i(ge),Te=a(77),Ce=l(Te),Ie=a(147),Se=a(203),De=i(Se),Ae=0,Oe=0,ke=0,Me=0,Re=0,Pe=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),we=f.default.createElement("i",{className:"fa fa-trash-o"}),_e=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),Ve=f.default.createElement("td",{className:"unselectable"},""),Le=f.default.createElement("td",{className:"unselectable"},""),Fe=f.default.createElement("td",{className:"unselectable"},""),$e=f.default.createElement("b",null,"Labor: "),He=f.default.createElement("td",{className:"unselectable"},""),We=f.default.createElement("td",{className:"unselectable"},""),qe=f.default.createElement("i",{className:"fa fa-trash-o"}),Ue=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),je=f.default.createElement("td",{className:"unselectable"},""),Be=f.default.createElement("td",{className:"unselectable"},""),ze=f.default.createElement("td",{className:"unselectable"},""),Ze=f.default.createElement("b",null,"Shipping: "),Ye=f.default.createElement("td",{className:"unselectable"},""),Qe=f.default.createElement("td",{className:"unselectable"},""),Ge=f.default.createElement("td",{className:"unselectable"},""),Je=f.default.createElement("i",{className:"fa fa-trash-o"}),Ke=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),Xe=f.default.createElement("i",{className:"fa fa-trash-o"}),et=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),tt=f.default.createElement("span",{className:"inc"}),at=f.default.createElement("span",{className:"check"}),lt=f.default.createElement("span",{className:"box"}),it=f.default.createElement("i",{className:"fa fa-trash-o"}),st=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),nt=f.default.createElement("b",null,"Labor: "),dt=f.default.createElement("td",{className:"unselectable"},""),rt=f.default.createElement("td",{className:"unselectable"},""),mt=f.default.createElement("td",{className:"unselectable"},""),ot=f.default.createElement("td",{className:"unselectable"},""),ut=f.default.createElement("td",{className:"unselectable"},""),ct=f.default.createElement("td",{className:"unselectable"},""),ft=f.default.createElement("td",{className:"unselectable"},""),pt=f.default.createElement("td",{className:"unselectable"},""),ht=f.default.createElement("i",{className:"fa fa-trash-o"}),Et=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),bt=f.default.createElement("b",null,"Shipping: "),Nt=f.default.createElement("td",{className:"unselectable"},""),yt=f.default.createElement("td",{className:"unselectable"},""),vt=f.default.createElement("td",{className:"unselectable"},""),gt=f.default.createElement("td",{className:"unselectable"},""),xt=f.default.createElement("td",{className:"unselectable"},""),Tt=f.default.createElement("td",{className:"unselectable"},""),Ct=f.default.createElement("td",{className:"unselectable"},""),It=f.default.createElement("td",{className:"unselectable"},""),St=f.default.createElement("td",{className:"unselectable"},""),Dt=f.default.createElement("td",{className:"unselectable"},""),At=f.default.createElement("i",{className:"fa fa-trash-o"}),Ot=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),kt=f.default.createElement("i",{className:"fa fa-trash-o"}),Mt=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),Rt=f.default.createElement("i",{className:"fa fa-trash-o"}),Pt=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),wt=f.default.createElement("b",null,"Labor: "),_t=f.default.createElement("td",{className:"unselectable"},""),Vt=f.default.createElement("i",{className:"fa fa-trash-o"}),Lt=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),Ft=f.default.createElement("b",null,"Shipping: "),$t=f.default.createElement("td",{className:"unselectable"},""),Ht=f.default.createElement("td",{className:"unselectable"},""),Wt=f.default.createElement("td",{className:"unselectable"},""),qt=f.default.createElement("td",{className:"unselectable"},""),Ut=f.default.createElement("td",{className:"unselectable"},""),jt=f.default.createElement("td",{className:"unselectable"},""),Bt=f.default.createElement("td",{className:"unselectable"},""),zt=f.default.createElement("td",{className:"unselectable"},""),Zt=f.default.createElement("i",{className:"fa fa-trash-o"}),Yt=f.default.createElement("td",null,f.default.createElement("span",{className:"handle"},f.default.createElement("i",{className:"fa fa-bars"}))),Qt=f.default.createElement("i",{className:"fa fa-trash-o"}),Gt=f.default.createElement("li",{className:"active"},f.default.createElement("a",{href:"#estimate-add","data-toggle":"tab"},"Estimate")),Jt=f.default.createElement("div",{className:"portlet-title"},f.default.createElement("div",{className:"caption"},f.default.createElement("span",{className:"caption-subject bold uppercase"},"General Details"))),Kt=f.default.createElement("label",{htmlFor:"opportunity"},"Opportunity"),Xt=f.default.createElement("option",{value:"0"},"Select"),ea=f.default.createElement("label",{htmlFor:"salesrep"},"Sales Rep",f.default.createElement("span",{className:"required"},"*")),ta=f.default.createElement("label",{htmlFor:"individual"},"Customer",f.default.createElement("span",{className:"required"},"*")),aa=f.default.createElement("div",{className:"portlet-title"},f.default.createElement("div",{className:"caption"},f.default.createElement("span",{className:"caption-subject bold uppercase"},"Billing Address"))),la=f.default.createElement("label",{htmlFor:"billAdd1"},"Address 1"),ia=f.default.createElement("label",{htmlFor:"billAdd2"},"Address 2"),sa=f.default.createElement("div",{className:"portlet-title"},f.default.createElement("div",{className:"caption"},f.default.createElement("span",{className:"caption-subject bold uppercase"},"Shipping Address"))),na=f.default.createElement("label",{htmlFor:"shipAdd1"},"Address 1"),da=f.default.createElement("label",{htmlFor:"shipAdd2"},"Address 2"),ra=f.default.createElement("label",{htmlFor:"stage"},"Stage"),ma=f.default.createElement("label",{htmlFor:"taxRate"},"Default Markup(%)"),oa=f.default.createElement("label",{htmlFor:"project"},"Project"),ua=f.default.createElement("option",{value:"0"},"Select"),ca=f.default.createElement("label",{htmlFor:"proposal"},"Proposal"),fa=f.default.createElement("option",{value:"0"},"Select"),pa=f.default.createElement("label",{htmlFor:"note"},"Estimate Notes"),ha=f.default.createElement("label",{htmlFor:"taxRate"},"Tax Rate(%)"),Ea=f.default.createElement("label",{htmlFor:"proposed_services"},"Proposed Services (visible on quote)"),ba=f.default.createElement("div",{className:"caption"},f.default.createElement("i",{className:"icon-share font-dark"}),f.default.createElement("span",{className:"caption-subject font-dark bold uppercase"},"Line Items")),Na=f.default.createElement("th",{className:"items"}),ya=f.default.createElement("th",{className:"items"},"#"),va=f.default.createElement("th",{className:"items"},"Mfg"),ga=f.default.createElement("th",{className:"items"},"Model No"),xa=f.default.createElement("th",{className:"items"},"Part No"),Ta=f.default.createElement("th",{className:"items"},"Desc"),Ca=f.default.createElement("th",{className:"items"},"Qty"),Ia=f.default.createElement("th",{className:"rowtotal"},"Row Total"),Sa=f.default.createElement("th",{className:"items"}),Da=f.default.createElement("td",null),Aa=f.default.createElement("td",null),Oa=f.default.createElement("td",null),ka=f.default.createElement("td",null),Ma=f.default.createElement("td",null),Ra=f.default.createElement("td",null),Pa=f.default.createElement("td",null),wa=f.default.createElement("td",null),_a=f.default.createElement("th",{className:"items",rowSpan:"2"}),Va=f.default.createElement("th",{className:"items",rowSpan:"2"},"#"),La=f.default.createElement("th",{className:"items",rowSpan:"2"},"Item"),Fa=f.default.createElement("th",{className:"items",rowSpan:"2"},"Qty"),$a=f.default.createElement("th",{className:"material",colSpan:"8"},"Material"),Ha=f.default.createElement("th",{className:"rowtotal",rowSpan:"2"},"Row Total"),Wa=f.default.createElement("th",{className:"items",rowSpan:"2"}),qa=f.default.createElement("tr",null,f.default.createElement("th",{className:"material"},"Tax"),f.default.createElement("th",{className:"material"},"Our Cost"),f.default.createElement("th",{className:"material"},"Our Cost Ext"),f.default.createElement("th",{className:"material"},"Mark Up"),f.default.createElement("th",{className:"material"},"Cost"),f.default.createElement("th",{className:"material"},"Extended"),f.default.createElement("th",{className:"material"},"Tax"),f.default.createElement("th",{className:"material"},"Tax Extended")),Ua=f.default.createElement("td",null),ja=f.default.createElement("td",null),Ba=f.default.createElement("td",null),za=f.default.createElement("td",null),Za=f.default.createElement("td",null),Ya=f.default.createElement("td",null),Qa=f.default.createElement("td",null),Ga=f.default.createElement("td",null),Ja=f.default.createElement("td",null),Ka=f.default.createElement("th",{className:"items",rowSpan:"2"}),Xa=f.default.createElement("th",{className:"items",rowSpan:"2"},"#"),el=f.default.createElement("th",{className:"items",rowSpan:"2"},"Item"),tl=f.default.createElement("th",{className:"items",rowSpan:"2"},"Qty"),al=f.default.createElement("th",{className:"labor",colSpan:"6"},"Labor"),ll=f.default.createElement("th",{className:"rowtotal",rowSpan:"2"},"Row Total"),il=f.default.createElement("th",{className:"items",rowSpan:"2"}),sl=f.default.createElement("tr",null,f.default.createElement("th",{className:"labor"},"Type"),f.default.createElement("th",{className:"labor"},"Hrs"),f.default.createElement("th",{className:"labor"},"Hrs Ext"),f.default.createElement("th",{className:"labor"},"Rate"),f.default.createElement("th",{className:"labor"},"Unit"),f.default.createElement("th",{className:"labor"},"Extended")),nl=f.default.createElement("td",null),dl=f.default.createElement("td",null),rl=f.default.createElement("td",null),ml=f.default.createElement("td",null),ol=f.default.createElement("td",null),ul=f.default.createElement("td",null),cl=f.default.createElement("td",null),fl=f.default.createElement("td",null),pl=f.default.createElement("div",{className:"caption"},f.default.createElement("span",{className:"caption-subject font-dark bold"},"Add Line Item:")),hl=f.default.createElement("i",{className:"icon-plus"}),El=f.default.createElement("i",{className:"icon-plus"}),bl=f.default.createElement("i",{className:"icon-plus"}),Nl=f.default.createElement("i",{className:"icon-plus"}),yl=f.default.createElement("label",{htmlFor:"revisionNotes"},"Revision Notes"),vl=f.default.createElement("caption",{className:"font-dark bold uppercase"},"Material"),gl=f.default.createElement("th",{colSpan:"1"},"Cost"),xl=f.default.createElement("th",{colSpan:"1"},"Our Cost Ext Total"),Tl=f.default.createElement("th",{colSpan:"1"},"Tax"),Cl=f.default.createElement("th",{colSpan:"1"},"Shipping"),Il=f.default.createElement("th",{colSpan:"1"},"Total"),Sl=f.default.createElement("th",{colSpan:"1"},"Markup %"),Dl=f.default.createElement("th",{colSpan:"1"},"Markup Total"),Al=f.default.createElement("caption",{className:"font-dark bold uppercase"},"Labor"),Ol=f.default.createElement("caption",{className:"font-dark bold uppercase"},"Total"),kl=f.default.createElement("th",{colSpan:"1"},"Material"),Ml=f.default.createElement("th",{colSpan:"1"},"Labor"),Rl=f.default.createElement("th",{colSpan:"1"},"Tax"),Pl=f.default.createElement("th",{colSpan:"1"},"Shipping"),wl=f.default.createElement("th",{className:"caption-subject font-dark bold uppercase",colSpan:"1"},"Grand Total"),_l=f.default.createElement("div",{className:"modal-header"},f.default.createElement("div",{className:"caption"},f.default.createElement("span",{className:"caption-subject bold uppercase"},"Select Supplier"))),Vl=f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("th",null,"Name"),f.default.createElement("th",null,"Dealer Price"),f.default.createElement("th",null,"List Price"),f.default.createElement("th",null,"Demo Price"),f.default.createElement("th",null,"Action"))),Ll=function(e){function t(e,a){n(this,t);var l=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return(0,x.default)(l),l.state={supplierData:[],itemPricedData:[],showItemSearch:{display:"none"},taxRate:1.8,disabled:!1,itemDetails:[],items:[],companyValue:"",individualValue:"",proposalValue:"",projectValue:"",itemValue:"",opportunityValue:"",salesrepValue:"",companyPhone:"",companyInternet:"",addressDetails:{mapAddress1:"",mapAddress2:"",city:"",state:"",zip:""},companyOptions:[],salesrepOptions:[],opportunityOptions:[],individualOptions:[],proposalOptions:[],projectOptions:[],itemOptions:[],estimateTotal:"",unitPriceValue:"",laborRatesData:[],laborTypeId:"",contactAddType:"",newContactData:"",laborTotalMore:[],laborHoursMore:[],expandTotal:!1,expandHours:!1,expandType:"",defaultMarkup:30,defaultTaxRate:9,itemTab:"active",materialTab:"",laborTab:"",itemDeleteIndex:"",newItemAdded:"",newItemAddFlag:!1,newAddedSupplier:"",manufacturerList:[],manufacturerValue:"",modalName:"",new_phone:"",query:"",customerValue:"",laborModalValue:"",estimateNumber:"",proposedServiceValue:De.default.createEmptyValue(),pageRedirect:""},l}return r(t,e),u(t,[{key:"componentDidMount",value:function(){if(X.FormValidationMd.init(),localStorage.contactEstId){var e={contactId:localStorage.contactEstId};this.props.contactactions.getContact(e)}if(localStorage.oppEstId){var t={opportunityId:localStorage.oppEstId};this.props.oppActions.getOppDetailValues(t)}if(this.props.params.proposalId){var a={proposalId:this.props.params.proposalId};this.props.actions.getProposalDetails(a)}var l=this,i=document.getElementById("create_estimate");i&&i.addEventListener("keydown",function(e){var t=e.key;"Escape"===t?l.state.modalName&&$(l.state.modalName).modal("hide"):"Enter"===t&&("#subheader_add"==l.state.modalName?l.handleHeaderAdd():"#shipping_add"==l.state.modalName?l.handleShippingAdd():"#labor_add"==l.state.modalName&&l.handleLaborAdd())}),$("body").on("hidden.bs.modal",function(){l.state.modalName=""})}},{key:"componentWillMount",value:function(){var e={companyId:localStorage.companyId},t={companyId:localStorage.companyId,moduleType:1};this.props.actions.getLaborRates(e,J.GET_LABOR_RATE),this.props.actions.getOpportunityList(e),this.props.actions.getProjectData(e),this.props.actions.getProposalData(e),this.props.actions.getEstimateNo(e),this.props.settingsActions.getEstimateStages(t);var a={parent:"Estimates",childone:"",childtwo:""};this.props.breadCrumb(a),this.handleItemSearchDebounced=S.default.debounce(function(){this.state.query&&this.props.actions.getItemData(this.state.query,J.GET_EST_ITEM)},350),this.handleSalesSearchDebounced=S.default.debounce(function(){this.state.query&&this.props.actions.getSalesRepData(this.state.query)},350),this.handleContactSearchDebounced=S.default.debounce(function(){this.state.query&&this.props.actions.getIndividualData(this.state.query)},350),this.handleCompanySearchDebounced=S.default.debounce(function(){this.state.query&&this.props.contactactions.getCompanyList(this.state.query)},350)}},{key:"componentWillUnmount",value:function(){localStorage.setItem("contactEstId",""),localStorage.setItem("oppEstId","")}},{key:"componentWillReceiveProps",value:function(e){var t=[],a=[],l=[],i=[],s=[],n=[],d={mapAddress1:"",mapAddress2:"",city:"",state:"",zip:""};if(localStorage.contactEstId&&0==t.length&&0==l.length&&e.createcontact){var r=e.createcontact.addressInfo[0];if(d={mapAddress1:r.mapAddress1,mapAddress2:r.mapAddress2,city:r.city,state:r.state,zip:r.zip},"2"==e.createcontact.userType){var m={value:e.createcontact.companyContactId,label:e.createcontact.companyName},o={value:e.createcontact._id,label:e.createcontact.firstname+" "+e.createcontact.lastname};this.setState({companyValue:m,individualValue:o})}else if("1"==e.createcontact.userType){var u={value:e.createcontact._id,label:e.createcontact.companyName};this.setState({companyValue:u,addressDetails:d})}e.createcontact.opportunitiesInfo.length>0?this.setState({addressDetails:d}):toastr.error(Ce.CREATE_OPPORTUNITY)}e.projectList.map(function(e,t){var l={id:e._id,label:e.title};a.push(l)}.bind(this)),e.companyList.map(function(e,a){var l={value:e._id,label:e.companyName};t.push(l)}.bind(this)),e.individualList.map(function(e,t){var a={value:e._id,label:e.firstname+" "+e.lastname};l.push(a)}.bind(this)),e.salesRepList.map(function(e,t){var a={value:e._id,label:e.firstname+" "+e.lastname};i.push(a)}.bind(this)),e.opportunityList.map(function(e,t){var a={id:e._id,label:e.opportunityNumber,customerId:e.contactId};s.push(a)}.bind(this)),e.laborRates.map(function(e,t){var a={value:e._id,text:e.laborType,_id:e._id,id:e._id,laborType:e.laborType,displayName:e.displayName,rate:localStorage.laborRate?localStorage.laborRate:e.rate};n.push(a)}.bind(this));if(0!==e.itemList.length){var c=this.state.query?e.itemList:[];this.setState({itemOptions:c})}else this.setState({itemOptions:[]});if(0!=e.companyPhoneInternet.length&&(e.companyPhoneInternet.map(function(e,t){e.isPrimary&&(d=e.mapAddress1+" , "+e.mapAddress2+" , "+e.city+" , "+e.state+" , "+e.zip)}.bind(this)),this.setState({addressDetails:d})),e.contactDetails){var f=JSON.parse(JSON.stringify(e.contactDetails)),p=f.addressInfo.find(function(e){return 1==e.isPrimary});p&&(d={mapAddress1:p.mapAddress1,mapAddress2:p.mapAddress2,city:p.city,state:p.state,zip:p.zip});var h={value:f._id,label:f.companyName};this.setState({companyValue:h}),this.setState({addressDetails:d})}if(e.companyCreated&&"C"===this.state.newContactData){var E={value:e.companyCreated.id,label:e.companyCreated.label};this.setState({companyValue:E,newContactData:""})}if(e.newIndividualCreated&&"N"===this.state.newContactData){var b={value:e.newIndividualCreated.id,label:e.newIndividualCreated.label};this.setState({individualValue:b,newContactData:""})}if(e.newSalesCreated&&"S"===this.state.newContactData){var N={value:e.newSalesCreated.id,label:e.newSalesCreated.label};this.setState({salesrepValue:N,newContactData:""})}if(this.state.newItemAddFlag&&e.newCreatedItem){var y={itemName:e.newCreatedItem.itemName,modal:e.newCreatedItem.modal,partNumber:e.newCreatedItem.partNumber,manufacturer:e.newCreatedItem.manufacturer,labourHour:0,_id:e.newCreatedItem._id},v={itemId:e.newCreatedItem._id,dealerPrice:this.state.newAddedSupplier?this.state.newAddedSupplier[0].dealerPrice:0};this.setState({newItemAddFlag:!1}),this.state.newItemAdded=y,this.handleLineItemAdd("",v)}if(e.estimateNo&&this.setState({estimateNumber:e.estimateNo}),void 0!=e.createProposalData){var g=e.createProposalData.redirectValue,x=JSON.parse(JSON.stringify(e.createProposalData)),T={value:x.customerId?x.customerId:"",label:x.customerName},C={value:x.individualId?x.individualId:"",label:x.individualName};this.setState({companyValue:T,individualValue:C,disabled:!0,pageRedirect:g})}this.setState({companyOptions:t,projectOptions:e.projectList,proposalOptions:e.proposalList,individualOptions:l,salesrepOptions:i,opportunityOptions:e.opportunityList,laborRatesData:n,manufacturerList:e.ManufacturerList}),setTimeout(function(){ee.FloatLabel.init()},400)}},{key:"componentWillUpdate",value:function(e,t){var a=this,l="sortable",i=0;"active"==a.state.itemTab?l="sortable":"active"==a.state.materialTab?l="sortable1":"active"==a.state.laborTab&&(l="sortable2"),$("#"+l).sortable({handle:".handle",update:function(e,s){var n=[];$("#"+l).sortable("toArray",{attribute:"data-id"}).map(function(e){n.push(t.itemPricedData[e])}),n.forEach(function(e,t){e:if(t>i)if(e.headerName){if(e.headerName){i=0;break e}}else e.header=n[i].headerName}),a.setState({itemPricedData:n}),$("#"+l).sortable("cancel")},change:function(e,t){var a=t.placeholder.index();a>-1&&(i=a)}})}},{key:"onChange",value:function(e){this.setState({proposedServiceValue:e})}},{key:"handleIndividualChange",value:function(e){this.setState({individualValue:e})}},{key:"handleCompanyChange",value:function(e){if(e){this.setState({companyValue:e});var t={contactId:e.value};this.props.actions.getCustomerDetails(t)}else this.setState({companyValue:"",individualValue:"",addressDetails:""})}},{key:"handleSelectsBlur",value:function(){this.props.actions.clearSelects()}},{key:"handleProposalChange",value:function(e){var t=e.target.value;""!==t&&"0"!=t?this.setState({proposalValue:t}):this.setState({proposalValue:""})}},{key:"handleProjectChange",value:function(e){var t=e.target.value;""!==t&&"0"!=t?this.setState({projectValue:t}):this.setState({projectValue:""})}},{key:"handleOpportunityChange",value:function(e){var t="",a=e.target.value;if(""!==a&&"0"!=a){this.setState({opportunityValue:e.target.value});var l=this.state.opportunityOptions.find(function(t){return t._id===e.target.value});E.default.findDOMNode(this.refs.name.refs.name).value=l.opportunityNumber;var i={contactId:l.contactId};l.individualId&&(t={value:l.individualId._id,label:l.individualId.firstname+" "+l.individualId.lastname}),this.props.actions.updateOpportunityState(),this.props.actions.getCustomerDetails(i),this.setState({individualValue:t,individualOptions:[],companyValue:"",addressDetails:""})}else this.props.actions.updateOpportunityState(),E.default.findDOMNode(this.refs.name.refs.name).value="",this.setState({opportunityValue:"",individualValue:"",individualOptions:[],companyValue:"",addressDetails:""})}},{key:"handleSalesRepChange",value:function(e){this.setState({salesrepValue:e})}},{key:"handleItemChange",value:function(e){this.setState({itemValue:e}),setTimeout(function(){ee.FloatLabel.init()},200)}},{key:"handlePopUpClose",value:function(e){"item"===e?(this.setState({itemValue:"",itemOptions:[]}),$("#lineitem_add").modal("hide")):"supplier"===e?$("#supplier_add").modal("hide"):"newItem"===e&&(E.default.findDOMNode(this.refs.itemEstimate.refs.item_manufacturer).value="",this.setState({manufacturerValue:"",manufacturerList:[]}),$("#add_item").modal("hide"))}},{key:"onCompanyInputChange",value:function(e){if(e.trim()){var t={companyName:e,companyId:localStorage.companyId};this.setState({query:t}),this.handleCompanySearchDebounced()}else this.props.actions.clearSelects(),this.setState({individualOptions:[],query:"",companyOptions:[]})}},{key:"onIndividualInputChange",value:function(e){var t=this.state.companyValue.value;if(t)if(e.trim()){var a={firstname:e,companyId:localStorage.companyId,contactId:t};this.setState({query:a}),this.handleContactSearchDebounced()}else this.props.actions.clearSelects(),this.setState({individualOptions:[],query:""})}},{key:"onSalesRepInputChange",value:function(e){if(e.trim()){var t={firstname:e,companyId:localStorage.companyId};this.setState({query:t}),this.handleSalesSearchDebounced()}else this.props.actions.clearSelects(),this.setState({salesrepOptions:[],query:""})}},{key:"onItemInputChange",value:function(e){var t=e.target.value.trim();if(t){var a={itemName:t,companyId:localStorage.companyId};this.setState({query:a}),this.handleItemSearchDebounced()}else this.setState({itemOptions:[],query:""})}},{key:"handleLaborChange",value:function(e,t){var a=t.laborType,l=this.state.itemPricedData;l[e].lType=a._id,l[e].displayLaborName=a.displayName,l[e].laborTypeName=a.laborType,l[e].lRate=a.rate,this.setState({itemPricedData:l});var i={data:a.rate};this.updateLineItemsTable(e,"LABOR",i)}},{key:"handleItemSubmit",value:function(e){var t=this.state.itemOptions[e];if(1===t.suppliersInfo.length){var a=t.suppliersInfo[0];this.handleLineItemAdd(e,a)}else t.suppliersInfo&&(this.setState({supplierData:t.suppliersInfo}),$("#supplier_add").modal({backdrop:"static",keyboard:!1}))}},{key:"handleLineItemAdd",value:function(e,t){var a="",l="";a=""===t?this.state.supplierData[e]:t,l=""!==e?this.state.itemOptions.find(function(e){return e._id===a.itemId}):this.state.newItemAdded;var i=l.manufacturer,s=l.partNumber,n=l.modal,d=l.itemName,r=1,m=!0,o=a.dealerPrice?parseFloat(a.dealerPrice):0,u=o*r,c=E.default.findDOMNode(this.refs.defaultMarkup).value?parseInt(E.default.findDOMNode(this.refs.defaultMarkup).value).toFixed(1):30..toFixed(1),f=o+c/100*o,p=r*f,h=E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*p:0,b=p+h,N=0!=this.state.laborRatesData.length?this.state.laborRatesData[0].laborType:"",y=0!=this.state.laborRatesData.length?this.state.laborRatesData[0].displayName:"",v=0!=this.state.laborRatesData.length?this.state.laborRatesData[0]._id:"",g=l.labourHour?parseInt(l.labourHour):0,x=g*r,T=0!=this.state.laborRatesData.length?this.state.laborRatesData[0].rate:"",C=x*T,I={itemId:l._id,itemMfg:i,partNo:s,modelNo:n,itemName:d,quantity:r,mTaxable:m,mOurCost:o,mOurCostExtended:u,mMarkup:c,mCost:f,mExtended:p,mTax:h,mTaxExtended:b,laborTypeName:N,displayLaborName:y,lType:v,lHours:g,lExtended:C,lHoursExtended:x,lRate:T,rowTotal:b+C,header:"",itemTypeId:1,unit:g*T},S=this.state.itemPricedData;S.push(I),this.setState({itemPricedData:S,itemOptions:[]}),$("#lineitem_add").modal("hide"),$("#supplier_add").modal("hide")}},{key:"updateLineItemsTable",value:function(e,t,a){if("QTY"==t){var l=parseInt(a.data),i=this.state.itemPricedData,s=this.state.itemPricedData[e];s.quantity=l,s.mOurCostExtended=s.mOurCost*l,s.mExtended=s.mCost*l,s.mTax=s.mTaxable?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*s.mExtended:0,s.mTaxExtended=s.mExtended+s.mTax,s.lHoursExtended=s.lHours*l,s.lExtended=s.lHoursExtended*s.lRate,s.rowTotal=s.mTaxExtended+s.lExtended,i.splice(e,1,s),this.setState({itemPricedData:i})}else if("DESC"==t){var n=a.data,d=this.state.itemPricedData,r=this.state.itemPricedData[e];r.itemName=n,d.splice(e,1,r),this.setState({itemPricedData:d})}else if("HOURS"==t){var m=parseFloat(a.data),o=this.state.itemPricedData,u=this.state.itemPricedData[e];u.lHours=m.toFixed(2),u.lHoursExtended=u.lHours*u.quantity,u.lExtended=u.lHoursExtended*u.lRate,u.rowTotal=u.mTaxExtended+u.lExtended,u.unit=u.lRate*u.lHours,o.splice(e,1,u),this.setState({itemPricedData:o})}else if("LABOR"==t||"RATE"==t){var c=parseInt(a.data);"RATE"==t&&localStorage.setItem("laborRate",c);var f=this.state.itemPricedData,p=this.state.itemPricedData[e];p.lRate=c,p.lExtended=p.lHoursExtended*p.lRate,p.rowTotal=p.mTaxExtended+p.lExtended,p.unit=p.lRate*p.lHours,f.splice(e,1,p),this.setState({itemPricedData:f})}}},{key:"isTaxableUpdate",value:function(e,t,a){if(pe.checkValidMarkAndTax(parseFloat(E.default.findDOMNode(this.refs.defaultMarkup).value.trim()),parseFloat(E.default.findDOMNode(this.refs.taxRate).value.trim()))){if("TAXABLE"==t){var l=a.target.checked,i=this.state.itemPricedData,s=this.state.itemPricedData[e];s.mTaxable=l,s.mTax=l?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*s.mExtended:0,s.mTaxExtended=s.mExtended+s.mTax,s.rowTotal=s.mTaxExtended+s.lExtended,i.splice(e,1,s),this.setState({itemPricedData:i})}}else toastr.error(Ce.MARKUP_TAXRATE_VALID)}},{key:"handleGlobalMarkup",value:function(e){var t=parseFloat(E.default.findDOMNode(this.refs.defaultMarkup).value);if(t>=0&&t<=100&&0!==this.state.itemPricedData.length){var a=this.state.itemPricedData;a.forEach(function(e,t){1!=e.itemTypeId&&2!=e.itemTypeId||(a[t].mMarkup=a[t].mMarkup,a[t].mCost=a[t].mOurCost+a[t].mMarkup/100*a[t].mOurCost,a[t].mExtended=a[t].quantity*a[t].mCost,a[t].mTax=E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*a[t].mExtended:0,a[t].mTaxExtended=a[t].mExtended+a[t].mTax,a[t].rowTotal=a[t].mTaxExtended+a[t].lExtended)}.bind(this)),this.setState({itemPricedData:a,defaultMarkup:t})}else 0==t?E.default.findDOMNode(this.refs.defaultMarkup).value="0":(isNaN(t)||""==t)&&(E.default.findDOMNode(this.refs.defaultMarkup).value="30");setTimeout(function(){ee.FloatLabel.init()},200)}},{key:"handleGlobalTaxRate",value:function(e){var t=E.default.findDOMNode(this.refs.taxRate).value;if(t>=0&&t<=100&&0!==this.state.itemPricedData.length){var a=this.state.itemPricedData;a.forEach(function(e,t){e.mTaxable&&(1!=e.itemTypeId&&2!=e.itemTypeId||(a[t].mTax=E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*a[t].mExtended:0,a[t].mTaxExtended=a[t].mExtended+a[t].mTax,a[t].rowTotal=a[t].mTaxExtended+a[t].lExtended))}.bind(this)),this.setState({itemPricedData:a,defaultTaxRate:t})}else(isNaN(t)||""==t)&&(E.default.findDOMNode(this.refs.taxRate).value="9");setTimeout(function(){ee.FloatLabel.init()},200)}},{key:"onChangeMarkupCost",value:function(e,t,a){if("MARKUP"==t){var l=parseFloat(a.data),i=this.state.itemPricedData,s=this.state.itemPricedData[e];s.mMarkup=Q.numberWithCommas(l.toFixed(2)),0==s.mMarkup?s.mCost=s.mOurCost+s.mOurCost:s.mCost=s.mOurCost+s.mMarkup/100*s.mOurCost,s.mExtended=s.quantity*s.mCost,s.mTax=s.mTaxable&&E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*s.mExtended:0,s.mTaxExtended=s.mExtended+s.mTax,s.rowTotal=s.mTaxExtended+s.lExtended,i.splice(e,1,s),this.setState({itemPricedData:i})}else if("COST"==t){var n=parseFloat(a.data),d=this.state.itemPricedData,r=this.state.itemPricedData[e];r.mCost=n,r.mMarkup=((r.mCost-r.mOurCost)/r.mOurCost*100).toFixed(2),r.mExtended=r.quantity*r.mCost,r.mTax=r.mTaxable&&E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value)/100*r.mExtended:0,r.mTaxExtended=r.mExtended+r.mTax,r.rowTotal=r.mTaxExtended+r.lExtended,d.splice(e,1,r),this.setState({itemPricedData:d})}else if("OURCOST"==t){var m=this.state.itemPricedData,o=this.state.itemPricedData[e],u=parseFloat(a.data);o.mOurCost=u,o.mOurCostExtended=u*o.quantity,o.mCost=u+o.mMarkup/100*u,m.splice(e,1,o),this.setState({itemPricedData:m})}}},{key:"handleNewContactModal",value:function(e){toastr.remove(),this.state.companyValue?(this.setState({contactAddType:e,new_phone:""}),$("#add-contact").modal({backdrop:"static",keyboard:!1})):toastr.error(Ce.REQUIRED_CUSTOMER)}},{key:"handleNewCompanyModal",value:function(e){toastr.remove(),E.default.findDOMNode(this.refs.companyChild.refs.new_customer).value="",this.setState({contactAddType:e,customerValue:""}),$("#add-company").modal({backdrop:"static",keyboard:!1})}},{key:"handleContactAdd",value:function(){if(toastr.remove(),(0,ne.default)("#add_other_contact").valid()){var e=E.default.findDOMNode(this.refs.contactChild.refs.new_phone).value,t=e?Q.removeSpecialCharSpace(e):"",a=[],l=[],i={phonetype:"Work",phone:E.default.findDOMNode(this.refs.contactChild.refs.new_phone).value.trim(),isPrimary:!0};a.push(i);var s={internetType:"Work",internetvalue:E.default.findDOMNode(this.refs.contactChild.refs.new_email).value.trim(),isPrimary:!0};l.push(s);var n={userId:localStorage.userId,companyId:localStorage.companyId,phone:a,internet:l,companyName:this.state.companyValue.label,companyContactId:this.state.companyValue.value,firstname:E.default.findDOMNode(this.refs.contactChild.refs.first_name).value.trim(),lastname:E.default.findDOMNode(this.refs.contactChild.refs.last_name).value.trim(),statusId:localStorage.statusNameId,userType:2,createdBy:localStorage.userName};if(""!==e)if(t.length>=11&&t.includes("x")){var d=t.substring(0,t.indexOf("x"));d.length<10?toastr.error(Ce.VALID_PHONE):("SALES"==this.state.contactAddType?(n.isSalesRep=!0,this.setState({newContactData:"S"})):this.setState({newContactData:"N"}),this.props.actions.addOtherContact(n,this.state.contactAddType),$("#add-contact").modal("hide"))}else t.length>=11?("SALES"==this.state.contactAddType?(n.isSalesRep=!0,this.setState({newContactData:"S"})):this.setState({newContactData:"N"}),this.props.actions.addOtherContact(n,this.state.contactAddType),$("#add-contact").modal("hide")):toastr.error(Ce.VALID_PHONE);else"SALES"==this.state.contactAddType?(n.isSalesRep=!0,this.setState({newContactData:"S"})):this.setState({newContactData:"N"}),this.props.actions.addOtherContact(n,this.state.contactAddType),$("#add-contact").modal("hide")}}},{key:"onContactFocus",value:function(){toastr.remove(),this.state.companyValue.value||toastr.error(Ce.REQUIRED_CUSTOMER)}},{key:"handleExpand",value:function(e){if("TOTAL"===e){var t=!this.state.expandTotal;this.setState({expandTotal:t})}else if("HOURS"===e){var a=!this.state.expandHours;this.setState({expandHours:a})}}},{key:"handleLineTab",value:function(e){1===e?this.setState({itemTab:"active",materialTab:"",laborTab:""}):2===e?this.setState({itemTab:"",materialTab:"active",laborTab:""}):3===e&&this.setState({itemTab:"",materialTab:"",laborTab:"active"})}},{key:"handleHeaderAdd",value:function(e){toastr.remove();var t=E.default.findDOMNode(this.refs.head_txt.refs.subheader).value;if(""!==t.trim()){var a={header:"",headerName:t,itemTypeId:4},l=this.state.itemPricedData;l.push(a),this.setState({itemPricedData:l}),$("#subheader_add").modal("hide")}else toastr.error(Ce.VALID_SUBHEADER)}},{key:"handleShippingAdd",value:function(e){toastr.remove();var t=E.default.findDOMNode(this.refs.ship_desc.refs.description).value,a=E.default.findDOMNode(this.refs.ship_desc.refs.amount).value;if(a&&parseInt(a)>0){var l={itemTypeId:3,header:"",rowTotal:parseInt(a),itemName:t},i=this.state.itemPricedData;i.push(l),this.setState({itemPricedData:i}),$("#shipping_add").modal("hide")}else toastr.error(Ce.VALID_AMOUNT)}},{key:"handleLaborAdd",value:function(e){toastr.remove();var t=E.default.findDOMNode(this.refs.labr_desc.refs.labor_type).value,a=this.state.laborRatesData.find(function(e){return e._id===t}),l=E.default.findDOMNode(this.refs.labr_desc.refs.labor_description).value.trim(),i=1,s=E.default.findDOMNode(this.refs.labr_desc.refs.labor_hours).value.trim();if(l.trim())if(s&&parseFloat(s)>0)if(a){var n=parseInt(i)*parseFloat(s).toFixed(2),d=s?parseFloat(s).toFixed(2):0,r={itemMfg:"",partNo:"",modelNo:"",itemName:E.default.findDOMNode(this.refs.labr_desc.refs.labor_description).value,quantity:i,mTaxable:!1,mOurCost:0,mOurCostExtended:0,mMarkup:0,mCost:0,mExtended:0,mTax:0,mTaxExtended:0,laborTypeName:0!=this.state.laborRatesData.length?a.laborType:"",displayLaborName:0!=this.state.laborRatesData.length?a.displayName:"",lType:0!=this.state.laborRatesData.length?a._id:"",lHours:d,lExtended:0!=this.state.laborRatesData.length?a.rate*n:0,lHoursExtended:n,lRate:0!=this.state.laborRatesData.length?a.rate:"",rowTotal:0,header:"",unit:0!=this.state.laborRatesData.length?a.rate*d:0,itemTypeId:2},m=this.state.itemPricedData.slice();m.push(r),this.setState({itemPricedData:m,itemTab:"",materialTab:"",laborTab:"active"}),$("#labor_add").modal("hide")}else toastr.error(Ce.ERROR_OCCURRED);else toastr.error(Ce.VALID_LABOR_HOURS);else toastr.error(Ce.REQUIRED_DESCRIPTION)}},{key:"updateDesc",value:function(e,t,a){if("DESC"==t){var l=a.data,i=this.state.itemPricedData,s=this.state.itemPricedData[e];s.itemName=l,i.splice(e,1,s),this.setState({itemPricedData:i})}else if("ROWTOTAL"==t){var n=parseInt(a.data),d=this.state.itemPricedData,r=this.state.itemPricedData[e];r.rowTotal=n,d.splice(e,1,r),this.setState({itemPricedData:d})}}},{key:"handleDelete",value:function(e){this.setState({itemDeleteIndex:e}),$("#lineItem_delete").modal("show")}},{key:"deletePricedItem",value:function(){if(""!==this.state.itemDeleteIndex){$("#lineItem_delete").modal("hide");var e=this.state.itemPricedData;e:for(var t=0;t<e.length;t++)if(t>this.state.itemDeleteIndex)if(e[t].headerName){if(e[t].headerName)break e}else e[t].header="";e.splice(this.state.itemDeleteIndex,1),this.setState({itemPricedData:e,itemDeleteIndex:""})}}},{key:"createItemHandler",value:function(){$("#add_item").modal("show")}},{key:"addItemHandler",value:function(){if((0,ne.default)("#add_other_item").valid()){var e=E.default.findDOMNode(this.refs.itemEstimate.refs.item_name).value.trim(),t=E.default.findDOMNode(this.refs.itemEstimate.refs.item_modalNo).value.trim(),a=E.default.findDOMNode(this.refs.itemEstimate.refs.item_partNo).value.trim(),l=E.default.findDOMNode(this.refs.itemEstimate.refs.item_manufacturer).value.trim(),i=E.default.findDOMNode(this.refs.itemEstimate.refs.supplierName).value.trim(),s=E.default.findDOMNode(this.refs.itemEstimate.refs.listPrice).value.trim(),n=E.default.findDOMNode(this.refs.itemEstimate.refs.dealerPrice).value.trim(),d=[{supplierName:i,listPrice:s.replace(/[^0-9.]/g,""),dealerPrice:n.replace(/[^0-9.]/g,""),priceDate:(0,re.default)()}],r={companyId:localStorage.companyId,itemName:e,modal:t,partNumber:a,manufacturer:l,itemStatus:"Active",suppliers:d,createdBy:localStorage.userName};this.setState({newAddedSupplier:d,newItemAddFlag:!0}),this.props.itemaction.createItemNew(r),$("#add_item").modal("hide"),$("#lineitem_add").modal("hide")}}},{key:"confirmationHandler",value:function(){$("#confirm_id").modal("hide"),$("#add_item").modal("show")}},{key:"getManufacturerList",value:function(e){if(e.target.value&&e.target.value.trim()){this.setState({manufacturerValue:e.target.value});var t={companyId:localStorage.companyId,manufacturer:e.target.value.trim()};this.props.actions.getManufacturerList(t)}else this.setState({manufacturerList:[],manufacturerValue:""})}},{key:"selectManufacturer",value:function(e){this.setState({manufacturerValue:e,manufacturerList:[]})}},{key:"isStringValidNumber",value:function(e){var t=parseInt(e),a=parseFloat(E.default.findDOMNode(this.refs.defaultMarkup).value.trim()),l=parseFloat(E.default.findDOMNode(this.refs.taxRate).value.trim());return!(isNaN(t)||t<0)&&(!!pe.checkValidMarkAndTax(a,l)&&t)}},{key:"isStringValidMarkup",value:function(e){var t=parseInt(e);return!(isNaN(t)||t<0)}},{key:"isStringValidLabor",value:function(e){var t=parseFloat(e),a=E.default.findDOMNode(this.refs.defaultMarkup).value.trim(),l=E.default.findDOMNode(this.refs.taxRate).value.trim();return!(isNaN(t)||t<0)&&(!!pe.checkValidMarkAndTax(a,l)&&t.toString())}},{key:"formatInteger",value:function(e){return e.toString()}},{key:"handleModalOpen",value:function(e){var t=this;t.state.modalName="",t.state.laborModalValue=this.state.laborRatesData[0]._id,$(e).modal({backdrop:"static"}),t.state.modalName=e}},{key:"handleContactPhoneChange",value:function(e){this.setState({new_phone:e.target.value})}},{key:"handleCustomerChange",value:function(e){this.setState({customerValue:e})}},{key:"handleCompanyAdd",value:function(){toastr.remove();var e=E.default.findDOMNode(this.refs.companyChild.refs.new_customer).value.trim();if(e){var t={userId:localStorage.userId,companyId:localStorage.companyId,parentContactId:this.state.customerValue?this.state.customerValue.id:"",companyName:e,userType:1,statusId:localStorage.statusNameId,createdBy:localStorage.userName};this.setState({newContactData:"C"}),this.props.actions.addOtherCompany(t),$("#add-company").modal("hide")}else toastr.error("Please fill in a valid company name.")}},{key:"handleModalLabor",value:function(e){this.setState({laborModalValue:e.target.value})}},{key:"estimateHandler",value:function(e){if(e.preventDefault(),(0,ne.default)("#createEstimate").valid()){if(0!=this.state.itemPricedData.length){var t,a=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.rowTotal:e},0),l=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mTaxExtended:e},0),i=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mTaxExtended:e},0),n=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mOurCost:e},0),d=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mOurCostExtended:e},0),r=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mExtended:e},0),m=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mTax:e},0),o=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lHoursExtended:e},0),u=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lExtended:e},0),c=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lRate:e},0),f=this.state.itemPricedData.reduce(function(e,t){return 3===t.itemTypeId?e+t.rowTotal:e},0),p=r-d,h=l,b=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lExtended:e},0),N=100*(r/d-1),y=r+u+m+f,v=(t={companyId:localStorage.companyId,customerId:this.state.companyValue?this.state.companyValue.value:"",estimateName:E.default.findDOMNode(this.refs.name.refs.name).value.trim(),opportunityId:this.state.opportunityValue?this.state.opportunityValue:"",individualId:this.state.individualValue?this.state.individualValue.value:"",proposalId:this.state.proposalValue?this.state.proposalValue:"",projectId:this.state.projectValue?this.state.projectValue:"",billingAddress1:E.default.findDOMNode(this.refs.billAdd1).value.trim(),billingAddress2:E.default.findDOMNode(this.refs.billAdd2).value.trim(),billingcity:E.default.findDOMNode(this.refs.billCity.refs.billCity).value.trim(),billingstate:E.default.findDOMNode(this.refs.billState.refs.billState).value.trim(),billingzip:E.default.findDOMNode(this.refs.billZip.refs.billZip).value.trim(),shippingAddress1:E.default.findDOMNode(this.refs.shipAdd1).value.trim(),shippingAddress2:E.default.findDOMNode(this.refs.shipAdd2).value.trim(),shippingcity:E.default.findDOMNode(this.refs.shipCity.refs.shipCity).value.trim(),shippingstate:E.default.findDOMNode(this.refs.shipState.refs.shipState).value.trim(),shippingzip:E.default.findDOMNode(this.refs.shipZip.refs.shipZip).value.trim(),note:E.default.findDOMNode(this.refs.note).value.trim(),proposedServices:this.state.proposedServiceValue.toString("html"),salesRep:this.state.salesrepValue?this.state.salesrepValue.value:"",stage:E.default.findDOMNode(this.refs.stageType).value,createdBy:localStorage.userName,revisionName:"Rev0",item:this.state.itemPricedData,laborCost:b,materialCost:h,revisionNotes:E.default.findDOMNode(this.refs.revisionNotes).value.trim(),itemsTotal:a,ourCostTotal:n,materialExtendedTotal:r,taxTotal:m,taxExtendedTotal:l,hoursExtendedTotal:o,rateTotal:c,laborExtendedTotal:u,materialCostTotal:i,shippingTotal:f,markUpPercent:N,markUpTotal:p},s(t,"laborCost",b),s(t,"materialCost",h),s(t,"totalEstimate",y),s(t,"taxRate",E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value):0),s(t,"markUp",E.default.findDOMNode(this.refs.defaultMarkup).value?parseInt(E.default.findDOMNode(this.refs.defaultMarkup).value):0),s(t,"estimateNumber",this.state.estimateNumber),t);pe.showLoader("create_estimate"),this.props.actions.createEstimate(v,this.state.pageRedirect)}else{var g={companyId:localStorage.companyId,customerId:this.state.companyValue?this.state.companyValue.value:"",estimateName:E.default.findDOMNode(this.refs.name.refs.name).value.trim(),opportunityId:this.state.opportunityValue?this.state.opportunityValue:"",individualId:this.state.individualValue?this.state.individualValue.value:"",proposalId:this.state.proposalValue?this.state.proposalValue:"",projectId:this.state.projectValue?this.state.projectValue:"",billingAddress1:E.default.findDOMNode(this.refs.billAdd1).value.trim(),billingAddress2:E.default.findDOMNode(this.refs.billAdd2).value.trim(),billingcity:E.default.findDOMNode(this.refs.billCity.refs.billCity).value.trim(),billingstate:E.default.findDOMNode(this.refs.billState.refs.billState).value.trim(),billingzip:E.default.findDOMNode(this.refs.billZip.refs.billZip).value.trim(),shippingAddress1:E.default.findDOMNode(this.refs.shipAdd1).value.trim(),shippingAddress2:E.default.findDOMNode(this.refs.shipAdd2).value.trim(),shippingcity:E.default.findDOMNode(this.refs.shipCity.refs.shipCity).value.trim(),shippingstate:E.default.findDOMNode(this.refs.shipState.refs.shipState).value.trim(),shippingzip:E.default.findDOMNode(this.refs.shipZip.refs.shipZip).value.trim(),note:E.default.findDOMNode(this.refs.note).value.trim(),proposedServices:this.state.proposedServiceValue.toString("html"),salesRep:this.state.salesrepValue?this.state.salesrepValue.value:"",stage:E.default.findDOMNode(this.refs.stageType).value,createdBy:localStorage.userName,revisionName:"Rev0",revisionNotes:E.default.findDOMNode(this.refs.revisionNotes).value.trim(),taxRate:E.default.findDOMNode(this.refs.taxRate).value?parseFloat(E.default.findDOMNode(this.refs.taxRate).value):0,markUp:E.default.findDOMNode(this.refs.defaultMarkup).value?parseInt(E.default.findDOMNode(this.refs.defaultMarkup).value):0,estimateNumber:this.state.estimateNumber};pe.showLoader("create_estimate"),this.props.actions.createEstimate(g,this.state.pageRedirect)}return!1}}},{key:"render",value:function(){var e={display:["INLINE_STYLE_BUTTONS","BLOCK_TYPE_BUTTONS","HISTORY_BUTTONS"],INLINE_STYLE_BUTTONS:[{label:"Bold",style:"BOLD",className:"custom-css-class"},{label:"Italic",style:"ITALIC"},{label:"Strikethrough",style:"STRIKETHROUGH"},{label:"Underline",style:"UNDERLINE"}],BLOCK_TYPE_BUTTONS:[{label:"Unordered List",style:"unordered-list-item"},{label:"Ordered List",style:"ordered-list-item"}]},t=JSON.parse(JSON.stringify(this.state.itemPricedData)),a=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mTaxExtended:e},0),l=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lExtended:e},0),i=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.rowTotal:e},0),s=(this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mOurCost:e},0),this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mOurCostExtended:e},0)),n=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mExtended:e},0),d=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.mTax:e},0),r=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lHoursExtended:e},0),m=this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lExtended:e},0),o=(this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lHours:e},0),this.state.itemPricedData.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lRate:e},0),n),u=d,c=this.state.itemPricedData.reduce(function(e,t){return 3===t.itemTypeId?e+t.rowTotal:e},0),h=n-s,E=100*(n/s-1);Ae=0,Oe=0,ke=0,Me=0,Re=0;var b=this.state.opportunityOptions.map(function(e,t){return f.default.createElement("option",{key:t,value:e._id},e.opportunityNumber)}.bind(this)),N=this.state.projectOptions.map(function(e,t){return f.default.createElement("option",{key:t,value:e._id},e.title)}.bind(this)),y=this.state.proposalOptions.map(function(e,t){return f.default.createElement("option",{key:t,value:e._id},e.proposalNumber)}.bind(this)),g=this.props.estimateStages.map(function(e,t){return f.default.createElement("option",{key:t,value:e._id},e.stageName)}.bind(this)),x=this.state.supplierData.map(function(e,t){return f.default.createElement("tr",{key:t},f.default.createElement("td",null,e.supplierName?e.supplierName:"-"),f.default.createElement("td",null,e.dealerPrice?e.dealerPrice:"-"),f.default.createElement("td",null,e.listPrice?e.listPrice:"-"),f.default.createElement("td",null,e.demoPrice?e.demoPrice:"-"),f.default.createElement("td",null,f.default.createElement("button",{type:"button",className:"btn btn-xs green",onClick:this.handleLineItemAdd.bind(this,t,"")},"Select supplier")))}.bind(this)),T=this.state.itemOptions.map(function(e,t){return f.default.createElement("tr",{key:t},f.default.createElement("td",null,e.manufacturer?e.manufacturer:"-"),f.default.createElement("td",null,e.modal?e.modal:"-"),f.default.createElement("td",null,e.partNumber?e.partNumber:"-"),f.default.createElement("td",null,e.itemName?e.itemName:"-"),f.default.createElement("td",null,f.default.createElement("button",{type:"button",className:"btn btn-xs green",onClick:this.handleItemSubmit.bind(this,t)},"Select item")))}.bind(this)),I=0,S=0,D=0,O=this.state.itemPricedData.map(function(e,t){return 1==e.itemTypeId?I+=1:2==e.itemTypeId?I+=1:3==e.itemTypeId?I+=1:4==e.itemTypeId&&(I=I),1===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Pe,f.default.createElement("td",{style:{textAlign:"center"}},I),f.default.createElement("td",null,e.itemMfg),f.default.createElement("td",null,e.modelNo?e.modelNo:"-"),f.default.createElement("td",null,e.partNo?e.partNo:"-"),f.default.createElement("td",null,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateLineItemsTable.bind(this,t,"DESC")})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),f.default.createElement("td",{onClick:this.handleLineTab.bind(this,2),style:{textAlign:"right",cursor:"pointer"}},e.mTaxExtended?"$"+Q.numberWithCommas(e.mTaxExtended.toFixed(2)):"$0"),f.default.createElement("td",{onClick:this.handleLineTab.bind(this,3),style:{textAlign:"right",cursor:"pointer"}},e.lExtended?"$"+Q.numberWithCommas(e.lExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},we))):2===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},_e,f.default.createElement("td",{style:{textAlign:"center"}},I),Ve,Le,Fe,f.default.createElement("td",null,$e,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),He,We,f.default.createElement("td",{style:{textAlign:"right"}},"$",f.default.createElement(M.RIEInput,{activeClassName:"form-control input-xsmall",classEditing:"form-control",value:e.rowTotal?Q.numberWithCommas(e.rowTotal.toFixed(2)):"0",propName:"data",change:this.updateDesc.bind(this,t,"ROWTOTAL")})),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},qe))):3===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Ue,f.default.createElement("td",{style:{textAlign:"center"}},I),je,Be,ze,f.default.createElement("td",null,Ze,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),Ye,Qe,Ge,f.default.createElement("td",{style:{textAlign:"right"}},"$",f.default.createElement(M.RIEInput,{activeClassName:"form-control input-xsmall",classEditing:"form-control",value:e.rowTotal?Q.numberWithCommas(e.rowTotal.toFixed(2)):"0",propName:"data",change:this.updateDesc.bind(this,t,"ROWTOTAL")})),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Je))):4===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Ke,f.default.createElement("td",{className:"unselectable-header",colSpan:"9"},e.headerName),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Xe))):void 0}.bind(this)),R=this.state.itemPricedData.map(function(e,t){return 1==e.itemTypeId?S+=1:2==e.itemTypeId?S+=1:3==e.itemTypeId?S+=1:4==e.itemTypeId&&(S=S),1===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},et,f.default.createElement("td",null,S||""),f.default.createElement("td",null,e.itemMfg+" "+e.modelNo+" "+(e.partNo?" ("+e.partNo+")":null)),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement("div",{className:"md-checkbox",style:{marginLeft:"8px"}},f.default.createElement("input",{type:"checkbox",id:t,className:"md-check",checked:e.mTaxable,value:e.mTaxable,onChange:this.isTaxableUpdate.bind(this,t,"TAXABLE"),style:{minWidth:60}}),f.default.createElement("label",{htmlFor:t},tt,at,lt))),f.default.createElement("td",{style:{textAlign:"right"}},"$",f.default.createElement(M.RIEInput,{disabled:!1,validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-small",format:this.formatInteger,value:e.mOurCost?Q.numberWithCommas(e.mOurCost.toFixed(2)):"$0",propName:"data",change:this.onChangeMarkupCost.bind(this,t,"OURCOST"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"right"}},e.mOurCostExtended?"$"+Q.numberWithCommas(e.mOurCostExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement(M.RIEInput,{validate:this.isStringValidMarkup,activeClassName:"form-control input-small",classEditing:"form-control input-small",classInvalid:"invalid",format:this.formatInteger,value:e.mMarkup?e.mMarkup.toString():"0",propName:"data",change:this.onChangeMarkupCost.bind(this,t,"MARKUP"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"right"}},"$",f.default.createElement(M.RIEInput,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-small",format:this.formatInteger,value:e.mCost?Q.numberWithCommas(e.mCost.toFixed(2)):"$0",propName:"data",change:this.onChangeMarkupCost.bind(this,t,"COST"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"right"}},e.mExtended?"$"+Q.numberWithCommas(e.mExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.mTax?"$"+Q.numberWithCommas(e.mTax.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.mTaxExtended?"$"+Q.numberWithCommas(e.mTaxExtended.toFixed(2)):"$0"),f.default.createElement("td",{onClick:this.handleLineTab.bind(this,3),style:{textAlign:"right",cursor:"pointer"}},e.lExtended?"$"+Q.numberWithCommas(e.lExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},it))):2===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},st,f.default.createElement("td",null,S||""),f.default.createElement("td",null,nt,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),dt,rt,mt,ot,ut,ct,ft,pt,f.default.createElement("td",{style:{textAlign:"right"}},e.lExtended?"$"+Q.numberWithCommas(e.lExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},ht))):3===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Et,f.default.createElement("td",null,S||""),f.default.createElement("td",null,bt,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),Nt,yt,vt,gt,xt,Tt,Ct,It,St,Dt,f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},At))):4===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Ot,f.default.createElement("td",{className:"unselectable-header",colSpan:"13"},e.headerName),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},kt))):void 0}.bind(this)),w=this.state.itemPricedData.map(function(e,t){return 1==e.itemTypeId?D+=1:2==e.itemTypeId?D+=1:3==e.itemTypeId?D+=1:4==e.itemTypeId&&(D=D),1===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Mt,f.default.createElement("td",null,D||""),f.default.createElement("td",null,e.itemMfg+" "+e.modelNo+" "+(e.partNo?" ("+e.partNo+")":null)),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),f.default.createElement("td",{onClick:this.handleLineTab.bind(this,2),style:{textAlign:"right",cursor:"pointer"}},e.mTaxExtended?"$"+Q.numberWithCommas(e.mTaxExtended.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement(M.RIESelect,{change:this.handleLaborChange.bind(this,t),value:this.state.laborRatesData.find(function(t){return t.laborType===e.laborTypeName}),options:this.state.laborRatesData,propName:"laborType"})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIEInput,{validate:this.isStringValidLabor,activeClassName:"form-control input-small",classEditing:"form-control input-small",value:e.lHours>-1?e.lHours.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"HOURS"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"center"}},e.lHoursExtended?e.lHoursExtended.toFixed(2):"0"),f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-small",value:e.lRate?e.lRate.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"RATE"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"right"}},e.unit?"$"+Q.numberWithCommas(e.unit.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.lExtended?"$"+Q.numberWithCommas(e.lExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Rt))):2===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Pt,f.default.createElement("td",null,D||""),f.default.createElement("td",null,wt,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-xsmall",value:e.quantity?e.quantity.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"QTY")})),_t,f.default.createElement("td",null,f.default.createElement(M.RIESelect,{change:this.handleLaborChange.bind(this,t),value:this.state.laborRatesData.find(function(t){return t.laborType===e.laborTypeName}),options:this.state.laborRatesData,propName:"laborType"})),f.default.createElement("td",{style:{textAlign:"center"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidLabor,activeClassName:"form-control input-small",classEditing:"form-control input-small",value:e.lHours>0?e.lHours.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"HOURS"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"center"}},e.lHoursExtended?e.lHoursExtended.toFixed(2):"0"),f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement(M.RIENumber,{validate:this.isStringValidNumber,activeClassName:"form-control input-small",classEditing:"form-control input-small",value:e.lRate?e.lRate.toString():"0",propName:"data",change:this.updateLineItemsTable.bind(this,t,"RATE"),style:{minWidth:150,display:"inline-block",margin:0,padding:0,fontSize:15,outline:0,border:0}})),f.default.createElement("td",{style:{textAlign:"right"}},e.unit?"$"+Q.numberWithCommas(e.unit.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.lExtended?"$"+Q.numberWithCommas(e.lExtended.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Vt))):3===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Lt,f.default.createElement("td",null,D||""),f.default.createElement("td",null,Ft,f.default.createElement(M.RIETextArea,{activeClassName:"form-control input-small",classEditing:"form-control",value:e.itemName?e.itemName:"NA",propName:"data",change:this.updateDesc.bind(this,t,"DESC")})),$t,Ht,Wt,qt,Ut,jt,Bt,zt,f.default.createElement("td",{style:{textAlign:"right"}},e.rowTotal?"$"+Q.numberWithCommas(e.rowTotal.toFixed(2)):"$0"),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Zt))):4===e.itemTypeId?f.default.createElement("tr",{key:t,"data-id":t},Yt,f.default.createElement("td",{className:"unselectable-header",colSpan:"11"},e.headerName),f.default.createElement("td",null,f.default.createElement("span",{className:"btn btn-icon-only red",onClick:this.handleDelete.bind(this,t)},Qt))):void 0}.bind(this)),_=[];t.forEach(function(e){var t=_.filter(function(t){if(3!==t.itemTypeId&&4!==t.itemTypeId)return t.laborTypeName===e.laborTypeName})[0];t?(t.lHours=parseFloat(t.lHours)+parseFloat(e.lHours),t.lExtended+=e.lExtended):_.push(e)});var V=_.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+parseFloat(t.lHours):e},0),L=_.reduce(function(e,t){return 3!==t.itemTypeId&&4!==t.itemTypeId?e+t.lExtended:e},0),F=_.map(function(e,t){if(3!==e.itemTypeId&&4!==e.itemTypeId)return f.default.createElement("tr",{key:t},f.default.createElement("th",{colSpan:"1",style:{textAlign:"right"}},"-",e.laborTypeName),f.default.createElement("td",{style:{textAlign:"right"}},"$",Q.numberWithCommas(e.lExtended.toFixed(2))))}.bind(this)),$=_.map(function(e,t){if(3!==e.itemTypeId&&4!==e.itemTypeId)return f.default.createElement("tr",{key:t},f.default.createElement("th",{colSpan:"1",style:{textAlign:"right"}},"-",e.laborTypeName),f.default.createElement("td",{style:{textAlign:"right"}},e.lHours))}.bind(this)),H=this.state.manufacturerList.map(function(e){return f.default.createElement("li",{onClick:this.selectManufacturer.bind(this,e)},f.default.createElement("a",null,e))}.bind(this));return f.default.createElement("div",null,f.default.createElement("div",{className:"portlet-title tabbable-line"},f.default.createElement("ul",{className:"nav nav-tabs"},Gt,f.default.createElement("div",{className:"form-actions noborder text-right"},this.state.pageRedirect?f.default.createElement(p.Link,{to:this.state.pageRedirect,className:"btn red"},"Cancel"):f.default.createElement(p.Link,{to:localStorage.contactEstId?"/contactestimates/"+localStorage.contactEstId:"/estimate",className:"btn red"},"Cancel"),"",f.default.createElement("button",{type:"button",className:"btn blue",onClick:this.estimateHandler},"Save")))),f.default.createElement("div",{className:"portlet light bordered",id:"create_estimate"},f.default.createElement("div",{className:"portlet-body"},f.default.createElement("div",{className:"tab-content"},f.default.createElement("div",{className:"tab-pane active",id:"estimate-add"},Jt,f.default.createElement("form",{role:"form",id:"createEstimate"},f.default.createElement("div",{className:"form-body"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},Kt,f.default.createElement("select",{value:this.state.opportunityValue,onChange:this.handleOpportunityChange,name:"opportunity",className:"form-control"},Xt,b))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},ea,f.default.createElement("span",{className:"pull-right"},f.default.createElement("i",{className:"fa fa-plus-circle fa-2x","aria-hidden":"true",onClick:this.handleNewContactModal.bind(this,"SALES")})),f.default.createElement(v.default,{value:this.state.salesrepValue,valueKey:"id",placeholder:"Sales Rep",name:"salesrep",id:"salesrep",options:this.state.salesrepOptions,onChange:this.handleSalesRepChange,onBlur:this.handleSelectsBlur,onInputChange:this.onSalesRepInputChange}))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},ta,this.state.opportunityValue||this.state.disabled?null:f.default.createElement("span",{className:"pull-right"},f.default.createElement("i",{className:"fa fa-plus-circle fa-2x","aria-hidden":"true",onClick:this.handleNewCompanyModal.bind(this,"COMPANY")})),f.default.createElement(v.default,{disabled:this.state.disabled,value:(this.state.companyValue,this.state.companyValue),name:"company",id:"company",options:this.state.companyOptions,onChange:this.handleCompanyChange,onBlur:this.handleSelectsBlur,onInputChange:this.onCompanyInputChange}))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement("label",{htmlFor:"individual"},"Customer Contact"),this.state.disabled?null:f.default.createElement("span",{className:"pull-right"},f.default.createElement("i",{className:"fa fa-plus-circle fa-2x","aria-hidden":"true",onClick:this.handleNewContactModal.bind(this,"INDIVIDUAL")})),f.default.createElement(v.default,{disabled:this.state.disabled,value:(this.state.individualValue,this.state.individualValue),name:"individual",id:"individual",options:this.state.individualOptions,onFocus:this.onContactFocus,onChange:this.handleIndividualChange,onBlur:this.handleSelectsBlur,onInputChange:this.onIndividualInputChange}))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"Estimate Name",name:"name",ref:"name",id:"name",htmlFor:"name",defaultValue:"",required:!0}))),aa,f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:1,ref:"billAdd1",name:"billAdd1",defaultValue:this.state.addressDetails.mapAddress1,key:this.state.addressDetails.mapAddress1}),la)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:1,ref:"billAdd2",name:"billAdd2",defaultValue:this.state.addressDetails.mapAddress2,key:this.state.addressDetails.mapAddress2}),ia)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"City",name:"billCity",htmlFor:"billCity",defaultValue:this.state.addressDetails.city,key:this.state.addressDetails.city,required:!1,ref:"billCity"})),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"State",name:"billState",htmlFor:"billState",defaultValue:this.state.addressDetails.state,key:this.state.addressDetails.state,required:!1,ref:"billState"})),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",min:0,parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"Zip",name:"billZip",htmlFor:"billZip",defaultValue:this.state.addressDetails.zip,key:this.state.addressDetails.zip,required:!1,ref:"billZip"}))),sa,f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:1,ref:"shipAdd1",name:"shipAdd1",defaultValue:""}),na)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:1,ref:"shipAdd2",name:"shipAdd2",defaultValue:""}),da)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"City",name:"shipCity",htmlFor:"shipCity",defaultValue:"",required:!1,ref:"shipCity"})),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"State",name:"shipState",htmlFor:"shipState",defaultValue:"",required:!1,ref:"shipState"})),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement(ae.default,{inputType:"text",min:0,parentDivClass:"form-group form-md-line-input form-md-floating-label",className:"form-control",title:"Zip",name:"shipZip",htmlFor:"shipZip",defaultValue:"",required:!1,ref:"shipZip"}))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement("select",{className:"form-control edited",id:"stageType",ref:"stageType",name:"stageType"},g),ra)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(C.default,{mask:Ie.taxRateMask,className:"form-control",guide:!1,name:"defaultMarkup",id:"defaultMarkup",ref:"defaultMarkup",htmlFor:"defaultMarkup",value:this.state.defaultMarkup,onBlur:this.handleGlobalMarkup}),ma)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},oa,f.default.createElement("select",{value:this.state.projectValue?this.state.projectValue:"",onChange:this.handleProjectChange,name:"project",className:"form-control"},ua,N))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},ca,f.default.createElement("select",{disabled:this.state.disabled,value:this.state.proposalValue?this.state.proposalValue:"",onChange:this.handleProposalChange,name:"proposal",className:"form-control"},fa,y))),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:1,ref:"note",name:"note",defaultValue:""}),pa)),f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(C.default,{mask:Ie.taxRateMask,className:"form-control",guide:!1,name:"taxRate",id:"taxRate",ref:"taxRate",htmlFor:"taxRate",value:this.state.defaultTaxRate,onBlur:this.handleGlobalTaxRate}),ha))))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12",style:{marginBottom:10}},Ea,f.default.createElement(De.default,{toolbarConfig:e,value:this.state.proposedServiceValue,onChange:this.onChange}))),f.default.createElement("div",{className:"portlet light portlet-fit portlet-datatable bordered"},f.default.createElement("div",{className:"portlet light bordered"},f.default.createElement("div",{className:"portlet-title tabbable-line"},ba,f.default.createElement("ul",{className:"nav nav-tabs"},f.default.createElement("li",{className:this.state.itemTab},f.default.createElement("a",{href:"#portlet_tab1","data-toggle":"tab",onClick:this.handleLineTab.bind(this,1)}," Items ")),f.default.createElement("li",{className:this.state.materialTab},f.default.createElement("a",{href:"#portlet_tab2","data-toggle":"tab",onClick:this.handleLineTab.bind(this,2)}," Material ")),f.default.createElement("li",{className:this.state.laborTab},f.default.createElement("a",{href:"#portlet_tab3","data-toggle":"tab",onClick:this.handleLineTab.bind(this,3)}," Labor ")))),f.default.createElement("div",{className:"portlet-body"},f.default.createElement("div",{className:"tab-content"},f.default.createElement("div",{className:"tab-pane "+this.state.itemTab,id:"portlet_tab1"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-12"},f.default.createElement("div",{className:"table-container table-responsive",style:{overflow:"auto"}},f.default.createElement("table",{className:"table table-striped table-bordered",id:"lineitem"},f.default.createElement("thead",null,f.default.createElement("tr",null,Na,ya,va,ga,xa,Ta,Ca,f.default.createElement("th",{className:"material",style:{cursor:"pointer"},onClick:this.handleLineTab.bind(this,2)}," Material"),f.default.createElement("th",{className:"labor",style:{cursor:"pointer"},onClick:this.handleLineTab.bind(this,3)},"Labor"),Ia,Sa)),f.default.createElement("tbody",{id:"sortable"},O),0!=this.state.itemPricedData.length?f.default.createElement("tfoot",null,f.default.createElement("tr",null,Da,Aa,Oa,ka,Ma,Ra,Pa,f.default.createElement("td",{style:{textAlign:"right"}},n?"$"+Q.numberWithCommas(n.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},l?"$"+Q.numberWithCommas(l.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},i?"$"+Q.numberWithCommas(i.toFixed(2)):"$0"),wa)):null))))),f.default.createElement("div",{className:"tab-pane "+this.state.materialTab,id:"portlet_tab2"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-12"},f.default.createElement("div",{className:"table-container table-responsive",style:{overflow:"auto"}},f.default.createElement("table",{className:"table table-striped table-bordered",id:"lineitem"},f.default.createElement("thead",null,f.default.createElement("tr",null,_a,Va,La,Fa,$a,f.default.createElement("th",{className:"labor",rowSpan:"2",style:{cursor:"pointer"},onClick:this.handleLineTab.bind(this,3)},"Labor"),Ha,Wa),qa),f.default.createElement("tbody",{id:"sortable1"},R),0!=this.state.itemPricedData.length?f.default.createElement("tfoot",null,f.default.createElement("tr",null,Ua,ja,Ba,za,Za,Ya,f.default.createElement("td",{style:{textAlign:"right"}},s?"$"+Q.numberWithCommas(s.toFixed(2)):""),Qa,Ga,f.default.createElement("td",{style:{textAlign:"right"}},n?"$"+Q.numberWithCommas(n.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},d?"$"+Q.numberWithCommas(d.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},a?"$"+Q.numberWithCommas(a.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},l?"$"+Q.numberWithCommas(l.toFixed(2)):"$0"),f.default.createElement("td",{style:{textAlign:"right"}},i?"$"+Q.numberWithCommas(i.toFixed(2)):"$0"),Ja)):null))))),f.default.createElement("div",{className:"tab-pane "+this.state.laborTab,id:"portlet_tab3"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-12"},f.default.createElement("div",{className:"table-container table-responsive",style:{overflow:"auto"}},f.default.createElement("table",{className:"table table-striped table-bordered",id:"lineitem"},f.default.createElement("thead",null,f.default.createElement("tr",null,Ka,Xa,el,tl,f.default.createElement("th",{className:"material",rowSpan:"2",style:{cursor:"pointer"},onClick:this.handleLineTab.bind(this,2)},"Material"),al,ll,il),sl),f.default.createElement("tbody",{id:"sortable2"},w),0!=this.state.itemPricedData.length?f.default.createElement("tfoot",null,f.default.createElement("tr",null,nl,dl,rl,ml,f.default.createElement("td",{style:{textAlign:"right"}},a?"$"+Q.numberWithCommas(a.toFixed(2)):"$0"),ol,ul,f.default.createElement("td",{style:{textAlign:"center"}},r?r.toFixed(2):""),f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement("span",null)),cl,f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement("span",null,m?"$"+Q.numberWithCommas(m.toFixed(2)):"$0")),f.default.createElement("td",{style:{textAlign:"right"}},f.default.createElement("span",null,i?"$"+Q.numberWithCommas(i.toFixed(2)):"$0")),fl)):null))))))),f.default.createElement("div",{className:"portlet-title"},pl,"",f.default.createElement("a",{onClick:this.handleModalOpen.bind(this,"#lineitem_add"),"data-backdrop":"static","data-keyboard":"false",className:"btn btn-sm btn-circle green"},hl,"Material"),"",f.default.createElement("a",{onClick:this.handleModalOpen.bind(this,"#labor_add"),"data-backdrop":"static","data-keyboard":"false",className:"btn btn-sm btn-circle blue"},El,"Labor"),"",f.default.createElement("a",{onClick:this.handleModalOpen.bind(this,"#subheader_add"),"data-backdrop":"static","data-keyboard":"false",className:"btn btn-sm btn-circle yellow"},bl,"Sub-Header"),"",f.default.createElement("a",{onClick:this.handleModalOpen.bind(this,"#shipping_add"),"data-backdrop":"static","data-keyboard":"false",className:"btn btn-sm btn-circle purple"},Nl,"Shipping")),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},f.default.createElement("div",{className:"form-group form-md-line-input form-md-floating-label"},f.default.createElement(P.default,{style:{resize:"none"},className:"form-control",rows:2,ref:"revisionNotes",name:"revisionNotes",defaultValue:""}),yl))),0!==this.state.itemPricedData.length?f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-4"},f.default.createElement("table",{className:"table table-striped table-bordered"},vl,f.default.createElement("tbody",null,f.default.createElement("tr",null,gl,f.default.createElement("td",{style:{textAlign:"right"}},"$",o?Q.numberWithCommas(o.toFixed(2)):0)),f.default.createElement("tr",null,xl,f.default.createElement("td",{style:{textAlign:"right"}},"$",s?Q.numberWithCommas(s.toFixed(2)):0)),f.default.createElement("tr",null,Tl,f.default.createElement("td",{style:{textAlign:"right"}},"$",u?Q.numberWithCommas(u.toFixed(2)):0)),f.default.createElement("tr",null,Cl,f.default.createElement("td",{style:{textAlign:"right"}},"$",c?Q.numberWithCommas(c.toFixed(2)):0)),f.default.createElement("tr",null,Il,f.default.createElement("td",{style:{textAlign:"right"}},"$",a?Q.numberWithCommas(a.toFixed(2)):0)),f.default.createElement("tr",null,Sl,f.default.createElement("td",{style:{textAlign:"right"}},E?E.toFixed(2):0,"%")),f.default.createElement("tr",null,Dl,f.default.createElement("td",{style:{textAlign:"right"}},"$",h?Q.numberWithCommas(h.toFixed(2)):0))))),f.default.createElement("div",{className:"col-md-4"},f.default.createElement("table",{className:"table table-striped table-bordered"},Al,f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",{colSpan:"1"},"Total",f.default.createElement("span",{onClick:this.handleExpand.bind(this,"TOTAL"),style:{color:"blue",cursor:"pointer"}},this.state.expandTotal?" (less...)":"(more...)")),f.default.createElement("td",{style:{textAlign:"right"}},"$",L?Q.numberWithCommas(L.toFixed(2)):0)),this.state.expandTotal?F:null,f.default.createElement("tr",null,f.default.createElement("th",{colSpan:"1"},"Hours",f.default.createElement("span",{onClick:this.handleExpand.bind(this,"HOURS"),style:{color:"blue",cursor:"pointer"}},this.state.expandHours?" (less...)":"(more...)")),f.default.createElement("td",{style:{textAlign:"right"}},V||0)),this.state.expandHours?$:null))),f.default.createElement("div",{className:"col-md-4"},f.default.createElement("table",{className:"table table-striped table-bordered"},Ol,f.default.createElement("tbody",null,f.default.createElement("tr",null,kl,f.default.createElement("td",{style:{textAlign:"right"}},"$",n?Q.numberWithCommas(n.toFixed(2)):0)),f.default.createElement("tr",null,Ml,f.default.createElement("td",{style:{textAlign:"right"}},"$",L?Q.numberWithCommas(L.toFixed(2)):0)),f.default.createElement("tr",null,Rl,f.default.createElement("td",{style:{textAlign:"right"}},"$",u?Q.numberWithCommas(u.toFixed(2)):0)),f.default.createElement("tr",null,Pl,f.default.createElement("td",{style:{textAlign:"right"}},"$",c?Q.numberWithCommas(c.toFixed(2)):0)),f.default.createElement("tr",null,wl,f.default.createElement("td",{style:{textAlign:"right"}},"$",Q.numberWithCommas((n+L+u+c).toFixed(2)))))))):null))),f.default.createElement(Ee.default,{title:"New Line Item",materialAddId:"lineitem_add",onItemInputChange:this.onItemInputChange,itemOptions:this.state.itemOptions,searchedItems:T,handlePopUpClose:this.handlePopUpClose.bind(this,"item"),createItemHandler:this.createItemHandler.bind(this,"item")}),f.default.createElement(ve.default,{ref:"head_txt",headerAddId:"subheader_add",handleHeaderAdd:this.handleHeaderAdd}),f.default.createElement(Ne.default,{ref:"ship_desc",shippingAddId:"shipping_add",handleShippingAdd:this.handleShippingAdd}),f.default.createElement(xe.default,{key:"labor_add",ref:"labr_desc",laborAddId:"labor_add",handleLaborAdd:this.handleLaborAdd,laborOptions:this.state.laborRatesData,laborValue:this.state.laborModalValue?this.state.laborModalValue:this.state.laborRatesData.length?this.state.laborRatesData[0]._id:"",handleModalLabor:this.handleModalLabor}),f.default.createElement("div",{id:"supplier_add",className:"modal fade",tabIndex:"-1","aria-hidden":"true"},f.default.createElement("div",{className:"modal-dialog "},f.default.createElement("div",{className:"modal-content"},_l,f.default.createElement("div",{className:"modal-body"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-12"},f.default.createElement("div",{className:"table-container table-responsive",style:{height:"150px",overflow:"auto"}},f.default.createElement("table",{className:"table table-striped table-bordered"},Vl,f.default.createElement("tbody",null,x)))))),f.default.createElement("div",{className:"modal-footer"},f.default.createElement("button",{type:"button",className:"btn dark btn-outline",onClick:this.handlePopUpClose.bind(this,"supplier")},"Close"))))),f.default.createElement(A.default,{addContactModalId:"add-contact",companyValue:this.state.companyValue,contactAddhandler:this.handleContactAdd,ref:"contactChild",phoneValue:this.state.new_phone,handleContactPhoneChange:this.handleContactPhoneChange}),f.default.createElement(k.default,{addCompanyModalId:"add-company",companyAddhandler:this.handleCompanyAdd,ref:"companyChild",customerValue:this.state.customerValue,customerOptions:this.state.companyOptions,handleCustomerChange:this.handleCustomerChange,handleSelectsBlur:this.handleSelectsBlur,onCompanyInputChange:this.onCompanyInputChange}),f.default.createElement(oe.default,{mfgList:H,onInputChange:this.getManufacturerList,manufacturerValue:this.state.manufacturerValue,itemModalId:"add_item",addItemHandler:this.addItemHandler,ref:"itemEstimate",handlePopUpClose:this.handlePopUpClose.bind(this,"newItem")}),f.default.createElement(ie.default,{deleteModalId:"lineItem_delete",deleteUserHandler:this.deletePricedItem}),f.default.createElement(ce.default,{confirmationId:"confirm_id",confirmationTitle:"",confirmationText:"Are you sure you want to create a new item in the database ?",confirmationHandler:this.confirmationHandler})))))}}]),t}(f.default.Component);t.default=(0,b.connect)(m,o)(Ll)}});